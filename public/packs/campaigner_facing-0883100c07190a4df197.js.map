{"version":3,"sources":["webpack:///campaigner_facing-0883100c07190a4df197.js","webpack:///webpack/bootstrap 136a2c1eb08c679b5bb1?8f02****","webpack:///./app/javascript/shared/show_errors.js?9adb","webpack:///./app/javascript/shared/global_events.js?ce56","webpack:///external \"window.$\"?f8d2***","webpack:///external \"window._\"?37bd****","webpack:///./app/javascript/campaigner_facing/setup_once.js","webpack:///./app/javascript/shared/pub_sub.js?80d3","webpack:///./app/javascript/campaigner_facing/actions_editor.js","webpack:///./app/javascript/campaigner_facing/ajax.js","webpack:///./app/javascript/campaigner_facing/analytics.js","webpack:///./app/javascript/campaigner_facing/collection_editor.js","webpack:///./app/javascript/campaigner_facing/configure_wysiwyg.js","webpack:///./app/javascript/campaigner_facing/dropzone_image_upload.js","webpack:///./app/javascript/campaigner_facing/form_element_creator.js","webpack:///./app/javascript/campaigner_facing/form_preview.js","webpack:///./app/javascript/campaigner_facing/layout_picker.js","webpack:///./app/javascript/campaigner_facing/page.js","webpack:///./app/javascript/campaigner_facing/page_edit_bar.js","webpack:///./app/javascript/campaigner_facing/plugins_toggle.js","webpack:///./app/javascript/campaigner_facing/search.js","webpack:///./app/javascript/campaigner_facing/selectize_config.js","webpack:///./app/javascript/campaigner_facing/shares_editor.js","webpack:///./app/javascript/campaigner_facing/sidebar.js","webpack:///./app/javascript/campaigner_facing/survey_editor.js","webpack:///./app/javascript/campaigner_facing/syntax_highlighting.js","webpack:///./app/javascript/campaigner_facing/tooltips.js","webpack:///./app/javascript/packs/campaigner_facing.js","webpack:///./~/clipboard/lib/clipboard-action.js","webpack:///./~/clipboard/lib/clipboard.js","webpack:///./~/delegate/src/closest.js","webpack:///./~/delegate/src/delegate.js","webpack:///./~/good-listener/src/is.js","webpack:///./~/good-listener/src/listen.js","webpack:///./~/select/src/select.js","webpack:///./~/tiny-emitter/index.js","webpack:///external \"window.Backbone\"?776e"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","147","__webpack_exports__","show","e","data","responseText","getResponseHeader","match","status","$form","$","target","length","response","parseJSON","ErrorDisplay","clearErrors","each","errors","f","showError","find","removeClass","remove","field_name","msgs","$field","findField","addClass","parent","append","errorMsg","on","hideError","msg","window","I18n","t","siblings","join","attr","parents","prev","149","__WEBPACK_IMPORTED_MODULE_0_jquery__","__WEBPACK_IMPORTED_MODULE_0_jquery___default","__WEBPACK_IMPORTED_MODULE_1_lodash__","__WEBPACK_IMPORTED_MODULE_1_lodash___default","__WEBPACK_IMPORTED_MODULE_2_backbone__","__WEBPACK_IMPORTED_MODULE_2_backbone___default","bindEvents","view","events","globalEvents","a","isObject","eventName","methodName","method","subscribe","bind","24","26","_","327","setupOnce","selector","viewClass","ii","el","$el","380","apply","arguments","unsubscribe","off","publish","trigger","587","__WEBPACK_IMPORTED_MODULE_1__setup_once__","ActionsEditor","Backbone","View","extend","click .action-publisher .btn","ajax:success form.shares-editor__new-form","initialize","this","pageId","updateButtons","$publisher","desired","handleClick","$target","current","updateAction","last","_this","ajax","publish_status","fail","588","__WEBPACK_IMPORTED_MODULE_0__shared_show_errors__","handleStart","button","prop","feedback","text","after","enableButton","handleError","handleSuccess","setTimeout","fadeOut","589","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","props","descriptor","writable","key","protoProps","staticProps","AnalyticsDashboard","barPadding","bottomMargin","margins","bottom","xAxis","labels","svg","width","height","setYScale","draw","drawLabels","drawAxis","selectAll","transition","duration","scale","setYForLabel","setFillForLabel","scaled","y","yAxisLabelLimit","_this2","enter","fill","_this3","_this4","xScale","d3","ordinal","domain","map","moment","date","format","axisDateFormat","rangeBands","axis","orient","dataset","linear","max","range","Conductor","id","chart","$totalAll","$totalNew","refreshData","cb","_this5","json","setCounters","totals","html","all_total","new_total","_this6","getData","hours","update","createMiniChart","className","select","makeDashboard","shortChartSVG","render","days_total","reverse","days_new","590","__WEBPACK_IMPORTED_MODULE_2__shared_show_errors__","__WEBPACK_IMPORTED_MODULE_3__shared_global_events__","CollectionEditor","whitelist","ajax:success #new_collection_element","ajax:success #change-form-template","ajax:error a[data-method=delete]","sortupdate .list-group","survey:form_added","makeSortable","autoComplete","deleteFailed","xhr","message","deleteErrorMessage","alert","responseJSON","keys","substringMatcher","strs","q","matches","substrRegex","RegExp","str","test","push","$fields","typeahead","hint","highlight","minLength","source","sortable","updateSort","event","ui","b","ids","item","children","val","submit","newElementAdded","resp","$listGroup","templateChanged","action","replace","form_id","591","configureWysiwyg","$editor","summernote","toolbar","TALL_EDITORS","indexOf","fontSizes","codemirror","theme","mode","lineNumbers","tabMode","lineWrapping","$contentField","encapsulateIframes","$html","updateContentBeforeSave","content","592","configureDropZone","Dropzone","options","dropzone","maxFilesize","paramName","addRemoveLinks","previewsContainer","createImageThumbnails","previewTemplate","document","querySelector","innerHTML","init","hide","replaceWith","file","removeFile","bindHandlers","imageId","console","log","addImageOption","newOption","removeImageOption","593","__WEBPACK_IMPORTED_MODULE_0__shared_global_events__","FormElementCreator","GENERIC_NAME","GENERIC_LABEL","roles","modes","default","hidden","instruction","choice","dropdown","change #form_element_data_type","click .form-element__remove-choice","click .form-element__add-choice","collection:element_added","changeFormMode","setModeVisuals","setModeValues","resetAfterSubmission","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","role","toggleClass","hasField","err","return","resetChoices","resetDefaultValue","resetRequired","setNameAwayFromGeneric","setNameToGeneric","setLabelAwayFromGeneric","setLabelToGeneric","$nameField","ensureCopyableChoiceField","$copyableChoiceField","clone","first","addChoice","removeChoice","$choiceField","594","updatePreview","updater","plugin_type","plugin_id","url","bindCaretToggle","595","LayoutPicker","click .radio-group__option","change .layout-type-checkbox","updateSelected","hasClass","updatePlan","showRelevantLayouts","$allRows","closest","is","layoutClass","getLayoutClass","not","layout_select_id","596","slugChecker","Model","defaults","valid","slug","slugView","keyup #page_title","change #page_title","keyup #page_slug","click #check_slug_available","updateViewWithValid","cacheDomElements","checking","$title","$slug","$feedback","$checkButton","$submit","generateSlug","getSlug","resetFeedback","checkSlugAvailable","preventDefault","updateSlug","set","save","unbind","597","PageModel","urlRoot","lastSaved","callbacks","isEqual","unchanged","patch","setLastSaved","PageEditBar","click .page-edit-bar__save-button","click .page-edit-bar__error-message","change .page-edit-bar__toggle-autosave .onoffswitch__checkbox","outstandingSaveRequest","addStepsToSidebar","model","setupAutosave","$saveBtn","scrollspy","offset","policeHeights","$existing","step","addStepToSidebar","$step","$ul","title","childNodes","nodeValue","trim","icon","link_href","link_target","li","readData","form","type","serializeForm","page","serializeArray","pair","endsWith","slice","disableSubmit","success","saved","error","saveFailed","enableSubmit","refresh","location","reload","time","currentTime","now","Date","minutes","getMinutes","seconds","getSeconds","getHours","findError","animate","scrollTop","top","toggleAutosave","autosave","shouldAutosave","setInterval","showUnsavedAlert","$lastSaved","noNotice","outerHeight","css","598","__WEBPACK_IMPORTED_MODULE_0__setup_once__","ActivationToggle","ajax:before","ajax:success","ajax:error","change .onoffswitch__checkbox","$stateInput","$checkbox","state","confirm","toggleButton","toggleState","599","searchConfig","click","index","selectize","clear","DataTable","aaSorting","600","plugins","closeAfterSelect","lastVal","onDropdownOpen","getValue","onDropdownClose","items","setValue","601","__WEBPACK_IMPORTED_MODULE_2__setup_once__","__WEBPACK_IMPORTED_MODULE_4_clipboard__","__WEBPACK_IMPORTED_MODULE_4_clipboard___default","SharesEditor","ajax:success form.shares-editor__delete-variant","click .shares-editor__toggle-edit","click .shares-editor__new-type-toggle .btn","click .shares-editor__view-toggle .btn","page:saved","page:errors","image:success","image:destroyed","deleteVariant","$summary_row","$stats_row","$edit_row","editRow","$row","toggleEditor","$btn","openEditor","switchVariantForm","switchView","setView","clearFormAndConformView","openEditorForErrors","updateSummaryRows","rows","row","$original","addImageSelectors","pruneImageSelectors","602","Sidebar","click .sidebar__header-link","toggleGroup","603","SurveyEditor","sortupdate .survey__forms","handleSort","saveFormOrder","form_ids","604","idx","cm","CodeMirror","fromTextArea","605","tooltip","668","__WEBPACK_IMPORTED_MODULE_4__campaigner_facing_selectize_config__","__WEBPACK_IMPORTED_MODULE_7__campaigner_facing_form_preview__","__WEBPACK_IMPORTED_MODULE_17__campaigner_facing_page_edit_bar__","__WEBPACK_IMPORTED_MODULE_18__campaigner_facing_analytics__","__WEBPACK_IMPORTED_MODULE_19__campaigner_facing_survey_editor__","__WEBPACK_IMPORTED_MODULE_20__campaigner_facing_form_element_creator__","assign","Analytics","724","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","factory","_select","_select2","obj","_typeof","constructor","ClipboardAction","resolveOptions","initSelection","container","emitter","selectedText","selectFake","selectTarget","isRTL","documentElement","getAttribute","removeFake","fakeHandlerCallback","fakeHandler","addEventListener","fakeElem","createElement","style","fontSize","border","padding","margin","position","yPosition","pageYOffset","setAttribute","appendChild","copyText","removeEventListener","removeChild","succeeded","execCommand","handleResult","emit","clearSelection","focus","getSelection","removeAllRanges","_action","Error","nodeType","hasAttribute","_target","725","_clipboardAction","_tinyEmitter","_goodListener","_interopRequireDefault","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","getAttributeValue","suffix","element","attribute","_clipboardAction2","_tinyEmitter2","_goodListener2","Clipboard","_Emitter","getPrototypeOf","listenClick","defaultAction","defaultTarget","defaultText","body","listener","onClick","delegateTarget","currentTarget","clipboardAction","destroy","actions","support","queryCommandSupported","forEach","732","DOCUMENT_NODE_TYPE","parentNode","Element","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","733","delegate","callback","useCapture","listenerFn","765","node","HTMLElement","nodeList","toString","string","String","fn","766","listen","listenNode","listenNodeList","listenSelector","Array","800","nodeName","isReadOnly","setSelectionRange","removeAttribute","selection","createRange","selectNodeContents","addRange","806","E","ctx","once","evtArr","len","evts","liveEvents","94"],"mappings":"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","file":"campaigner_facing-0883100c07190a4df197.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/packs/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 668);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 147:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// This file adds error messages inline to forms.\n// For it to work properly, you need to pass data from the controller like:\n//   format.json { render json: {errors: link.errors, name: 'link'}, status: :unprocessable_entity }\n// The name field is for if the form element names are prefixed, eg 'link[title]'\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  show: function show(e, data) {\n    if (!e || !data || !data.responseText || !data.getResponseHeader('Content-Type').match(/json/i) || data.status != 422) {\n      return; // no reason to try if we dont have what we need\n    }\n\n    // use the relevant form if the event was a form submission.\n    // otherwise, search in all the forms on the page.\n    var $form = $(e.target) && $(e.target).length ? $(e.target) : $('form');\n    var response = $.parseJSON(data.responseText);\n    ErrorDisplay.clearErrors($form);\n    $.each(response.errors, function (f, m) {\n      ErrorDisplay.showError(f, m, $form, response);\n    });\n  },\n  clearErrors: function clearErrors($form) {\n    $form.find('.has-error').removeClass('has-error');\n    $form.find('.error-msg').remove();\n  },\n  showError: function showError(field_name, msgs, $form, response) {\n    var $field = ErrorDisplay.findField(field_name, $form, response);\n    $field.addClass('has-error').parent().addClass('has-error');\n    $field.parent().append(ErrorDisplay.errorMsg(field_name, msgs));\n    $field.on('change', function (e) {\n      ErrorDisplay.hideError(e);\n    });\n  },\n  errorMsg: function errorMsg(field_name, msgs) {\n    var msg = typeof msgs === 'string' ? msgs : msgs[0];\n    var prefix = window.I18n ? I18n.t('errors.this_field') : 'The field';\n    return '<div class=\\'error-msg\\'>' + prefix + ' ' + msg + '</div>';\n  },\n  hideError: function hideError(e) {\n    $(e.target).removeClass('has-error').parent().removeClass('has-error');\n    $(e.target).siblings('.error-msg').remove();\n    $(e.target).parent('.error-msg').remove();\n  },\n  findField: function findField(field_name, $form, response) {\n    if (response.name) {\n      field_name = [response.name, '[', field_name, ']'].join('');\n    }\n    var $field = $form.find('[name=\"' + field_name + '\"]');\n    if (!$field.length) {\n      $field = $form.find(':submit').prev();\n    } else if ($field.attr('type') === 'radio' && $field.parents('.radio-container').length) {\n      return $field.parents('.radio-container');\n    }\n    return $field;\n  }\n});\n\n/***/ }),\n\n/***/ 149:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_backbone__ = __webpack_require__(94);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_backbone___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_backbone__);\n// allow backbone views to use a hash to declaratively\n// bind their methods to events called through\n// $.publish or Backbone.trigger\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  bindEvents: function bindEvents(view) {\n    var events = view.globalEvents;\n    if (!events || !__WEBPACK_IMPORTED_MODULE_1_lodash___default.a.isObject(events)) return;\n    for (var eventName in events) {\n      var methodName = events[eventName];\n      var method = view[methodName];\n      if (method) {\n        __WEBPACK_IMPORTED_MODULE_2_backbone___default.a.on(eventName, method, view);\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe(eventName, method.bind(view));\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports) {\n\nmodule.exports = window.$;\n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, exports) {\n\nmodule.exports = window._;\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction setupOnce(selector, viewClass) {\n  $(selector).each(function (ii, el) {\n    var $el = $(el);\n    if ($el.data('js-inited') != true) {\n      var toggle = new viewClass({ el: $el });\n      $el.data('js-inited', true);\n    }\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (setupOnce);\n\n/***/ }),\n\n/***/ 380:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n\n\nvar setupPubSub = function setupPubSub($) {\n  var o = $({});\n\n  $.subscribe = function () {\n    o.on.apply(o, arguments);\n  };\n\n  $.unsubscribe = function () {\n    o.off.apply(o, arguments);\n  };\n\n  $.publish = function () {\n    o.trigger.apply(o, arguments);\n  };\n};\n\nsetupPubSub(__WEBPACK_IMPORTED_MODULE_0_jquery___default.a);\n\n/***/ }),\n\n/***/ 587:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__setup_once__ = __webpack_require__(327);\n\n\n\nvar ActionsEditor = Backbone.View.extend({\n  events: {\n    'click .action-publisher .btn': 'handleClick',\n    'ajax:success form.shares-editor__new-form': 'clearFormAndConformView'\n  },\n\n  initialize: function initialize() {\n    this.pageId = this.$el.data('page-id');\n  },\n  updateButtons: function updateButtons($publisher, desired) {\n    $publisher.find('.btn-primary').removeClass('btn-primary');\n    $publisher.find('[data-state=\"' + desired + '\"]').addClass('btn-primary');\n  },\n  handleClick: function handleClick(e) {\n    var $target = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(e.target);\n    var $publisher = $target.parents('.action-publisher');\n    var current = $publisher.find('.btn-primary').data('state');\n    var desired = $target.data('state');\n    this.updateAction($publisher, desired, current);\n  },\n  updateAction: function updateAction($publisher, desired, last) {\n    var _this = this;\n\n    this.updateButtons($publisher, desired);\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.ajax('/api/pages/' + this.pageId + '/actions/' + $publisher.data('id'), {\n      method: 'PUT',\n      data: { publish_status: desired }\n    }).fail(function () {\n      _this.updateButtons($publisher, last);\n    });\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('actions:edit', function () {\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__setup_once__[\"a\" /* default */])('.actions-editor', ActionsEditor);\n});\n\n/***/ }),\n\n/***/ 588:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_show_errors__ = __webpack_require__(147);\n\n\n$(function () {\n  var handleStart = function handleStart(e, i) {\n    var button = $(e.target).find('.xhr-feedback');\n\n    $(e.target).find('.xhr-feedback-saving').remove();\n\n    button.prop('disabled', true);\n\n    var feedback = $('<span />').addClass('label label-success xhr-feedback-saving').text('Saving...');\n\n    button.after(feedback);\n  };\n\n  var enableButton = function enableButton(e) {\n    var button = $(e.target).find('.xhr-feedback');\n    button.prop('disabled', false);\n  };\n\n  var handleError = function handleError(e, data) {\n    enableButton(e);\n    var feedback = $('.xhr-feedback-saving').removeClass('label-success').addClass('label-danger').text('Save failed.');\n    __WEBPACK_IMPORTED_MODULE_0__shared_show_errors__[\"a\" /* default */].show(e, data);\n  };\n\n  var handleSuccess = function handleSuccess(e) {\n    enableButton(e);\n    var feedback = $('.xhr-feedback-saving').text('Saved!');\n\n    window.setTimeout(function () {\n      feedback.fadeOut();\n    }, 1000);\n  };\n\n  $('body').on('ajax:beforeSend', handleStart);\n  $('body').on('ajax:success', handleSuccess);\n  $('body').on('ajax:error', handleError);\n});\n\n/***/ }),\n\n/***/ 589:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar Y_AXIS_LABEL_LIMIT = 20;\n\nvar AnalyticsDashboard = function () {\n  _createClass(AnalyticsDashboard, null, [{\n    key: 'yAxisLabelLimit',\n    get: function get() {\n      return Y_AXIS_LABEL_LIMIT;\n    }\n  }]);\n\n  function AnalyticsDashboard() {\n    _classCallCheck(this, AnalyticsDashboard);\n\n    this.barPadding = 1;\n    this.bottomMargin = 100;\n    this.margins = { bottom: 30 };\n    this.xAxis = true;\n    this.labels = true;\n  }\n\n  _createClass(AnalyticsDashboard, [{\n    key: 'render',\n    value: function render() {\n      this.svg.attr('width', this.width).attr('height', this.height + this.margins.bottom);\n\n      this.setYScale(this.data);\n      this.draw();\n\n      if (this.labels) {\n        this.drawLabels();\n      }\n\n      if (this.xAxis) {\n        this.drawAxis();\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this = this;\n\n      this.setYScale(this.data);\n\n      this.svg.selectAll('.bar').data(this.data).transition().duration(750).attr('height', function (d) {\n        return _this.scale(d.value);\n      }).attr('y', function (d) {\n        return _this.height - _this.scale(d.value);\n      });\n\n      this.drawLabels();\n\n      this.svg.selectAll('.label').data(this.data).transition().duration(1000).text(function (d) {\n        return d.value;\n      }).attr('y', this.setYForLabel.bind(this)).attr('fill', this.setFillForLabel.bind(this));\n    }\n  }, {\n    key: 'setYForLabel',\n    value: function setYForLabel(d) {\n      var scaled = this.scale(d.value),\n          y = this.height - scaled + 15;\n\n      if (scaled < AnalyticsDashboard.yAxisLabelLimit) {\n        y -= AnalyticsDashboard.yAxisLabelLimit;\n      }\n\n      return y;\n    }\n  }, {\n    key: 'setFillForLabel',\n    value: function setFillForLabel(d) {\n      return this.scale(d.value) < 20 ? '#333' : '#fff';\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      var _this2 = this;\n\n      this.svg.selectAll('.bar').data(this.data).enter().append('rect').attr('width', this.width / this.data.length - this.barPadding).attr('fill', this.fill).attr('class', 'bar').attr('height', function (d) {\n        return _this2.scale(d.value);\n      }).attr('y', function (d) {\n        return _this2.height - _this2.scale(d.value);\n      }).attr('x', function (d, i) {\n        return i * (_this2.width / _this2.data.length);\n      });\n    }\n  }, {\n    key: 'drawLabels',\n    value: function drawLabels() {\n      var _this3 = this;\n\n      this.svg.selectAll('text').data(this.data).enter().append('text').text(function (d) {\n        return d.value;\n      }).attr('x', function (d, i) {\n        return i * (_this3.width / _this3.data.length) + (_this3.width / _this3.data.length - _this3.barPadding) / 2;\n      }).attr('y', this.setYForLabel.bind(this)).attr('class', 'label').attr('text-anchor', 'middle').attr('font-family', 'sans-serif').attr('font-size', '11px').attr('fill', this.setFillForLabel.bind(this));\n    }\n  }, {\n    key: 'drawAxis',\n    value: function drawAxis() {\n      var _this4 = this;\n\n      var xScale = d3.scale.ordinal().domain(this.data.map(function (d, i) {\n        return moment(d.date).format(_this4.axisDateFormat);\n      })).rangeBands([0, this.width]);\n\n      var xAxis = d3.svg.axis().scale(xScale).orient('bottom');\n\n      this.svg.append('g').attr('class', 'x axis').attr('transform', 'translate(0, ' + this.height + ')').call(xAxis);\n    }\n  }, {\n    key: 'setYScale',\n    value: function setYScale(dataset) {\n      this.scale = d3.scale.linear().domain([0, d3.max(dataset, function (d) {\n        return d.value;\n      })]).range([0, this.height]);\n    }\n  }]);\n\n  return AnalyticsDashboard;\n}();\n\nvar Conductor = function () {\n  function Conductor(id, chart) {\n    _classCallCheck(this, Conductor);\n\n    this.id = id;\n    this.chart = chart;\n    this.$totalAll = $('.total-actions-all');\n    this.$totalNew = $('.total-actions-new');\n\n    $('button#refresh-data').on('click', this.refreshData.bind(this));\n  }\n\n  _createClass(Conductor, [{\n    key: 'getData',\n    value: function getData(cb) {\n      var _this5 = this;\n\n      d3.json('/api/pages/' + this.id + '/analytics.json', function (json) {\n        if (cb) {\n          cb(json);\n          _this5.setCounters(json.totals);\n        }\n      });\n    }\n  }, {\n    key: 'setCounters',\n    value: function setCounters(totals) {\n      this.$totalAll.html(totals.all_total);\n      this.$totalNew.html(totals.new_total);\n    }\n  }, {\n    key: 'refreshData',\n    value: function refreshData() {\n      var _this6 = this;\n\n      this.getData(function (data) {\n        _this6.chart.data = data.hours;\n        _this6.chart.update();\n      });\n    }\n  }]);\n\n  return Conductor;\n}();\n\nvar createMiniChart = function createMiniChart(className, data) {\n  var svg = d3.select('#analytics-dashboard .' + className + ' .chart');\n\n  var chart = new AnalyticsDashboard();\n  chart.width = 360;\n  chart.height = 70;\n  chart.fill = 'rgba(51,51,51,0.3)';\n  chart.data = data;\n  chart.xAxis = false;\n  chart.labels = false;\n  chart.svg = svg;\n  return chart;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  makeDashboard: function makeDashboard(pageId) {\n    var shortChartSVG = d3.select('#analytics-dashboard .short-view .chart'),\n        chart = new AnalyticsDashboard(),\n        d = new Conductor(pageId, chart);\n\n    d.getData(function (data) {\n      chart.width = 495;\n      chart.height = 280;\n      chart.data = data.hours;\n      chart.fill = 'rgba(51,51,51,1)';\n      chart.svg = shortChartSVG;\n      chart.axisDateFormat = 'HH a';\n      chart.render();\n\n      createMiniChart('mini-total', data.days_total.reverse()).render();\n\n      createMiniChart('mini-new', data.days_new.reverse()).render();\n    });\n  }\n});\n\n/***/ }),\n\n/***/ 590:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__setup_once__ = __webpack_require__(327);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shared_show_errors__ = __webpack_require__(147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__shared_global_events__ = __webpack_require__(149);\n// This file handles the behaviour for managing form building.\n//\n// Dependencies:\n//\n//   jQuery.ui.sortable: https://jqueryui.com/sortable/\n//   - Allows form fields to be dragged and re-oredered\n//\n//   Twitter's typeahead: http://twitter.github.io/typeahead.js/\n//   - Use for autocompleting for setting the field's name value\n\n\n\n\n\n\nvar CollectionEditor = Backbone.View.extend({\n  whitelist: [\n  // Permitted fields provided by ActionKit\n  'address1', 'address2', 'city', 'country', 'email', 'first_name', 'last_name', 'middle_name', 'mobile_phone', 'name', 'phone', 'plus4', 'postal', 'prefix', 'region', 'state', 'suffix', 'zip',\n\n  // Common custom fields used by campaigners\n  'customer', 'employee', 'shareholder', 'investor'],\n\n  events: {\n    'ajax:success #new_collection_element': 'newElementAdded',\n    'ajax:success #change-form-template': 'templateChanged',\n    'ajax:error a[data-method=delete]': 'deleteFailed',\n    'sortupdate .list-group': 'updateSort'\n  },\n\n  globalEvents: {\n    'survey:form_added': 'autoComplete'\n  },\n\n  initialize: function initialize() {\n    this.makeSortable();\n    this.autoComplete();\n    this.$el.on('ajax:success', 'a[data-method=delete]', function () {\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).parents('.list-group-item').fadeOut();\n    });\n    __WEBPACK_IMPORTED_MODULE_3__shared_global_events__[\"a\" /* default */].bindEvents(this);\n  },\n\n  deleteFailed: function deleteFailed(e, xhr) {\n    var message = this.deleteErrorMessage(xhr);\n    alert(message);\n  },\n\n  deleteErrorMessage: function deleteErrorMessage(xhr) {\n    var errors = xhr && xhr.responseJSON && xhr.responseJSON.errors;\n    if (!errors || Object.keys(errors).length < 1) return 'That element could not be deleted';\n    var firstKey = Object.keys(errors)[0];\n    return 'That element ' + errors[firstKey];\n  },\n\n  substringMatcher: function substringMatcher(strs) {\n    return function findMatches(q, cb) {\n      var matches = [];\n      var substrRegex = new RegExp(q, 'i');\n\n      // Iterate through the pool of strings and for any string that\n      // contains the substring `q`, add it to the `matches` array\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.each(strs, function (i, str) {\n        if (substrRegex.test(str)) {\n          matches.push(str);\n        }\n      });\n      cb(matches);\n    };\n  },\n\n  autoComplete: function autoComplete() {\n    var $fields = this.$('.typeahead.typeahead--uninitialized');\n    $fields.removeClass('typeahead--uninitialized');\n    $fields.typeahead({\n      hint: true,\n      highlight: true,\n      minLength: 1\n    }, {\n      name: 'fields',\n      source: this.substringMatcher(this.whitelist)\n    });\n  },\n\n  makeSortable: function makeSortable() {\n    this.$('.list-group.sortable').sortable();\n  },\n\n  updateSort: function updateSort(event, ui, a, b) {\n    var ids = ui.item.parent().children().map(function (i, el) {\n      return __WEBPACK_IMPORTED_MODULE_0_jquery___default()(el).data('id');\n    }).get().join();\n    var $form = ui.item.parent().parent().find('form#sort-collection-elements');\n    $form.find('#form_element_ids').val(ids);\n    $form.submit();\n  },\n\n  newElementAdded: function newElementAdded(e, resp, c) {\n    var $listGroup = this.$(e.target).parents('.form-customization').find('.list-group');\n    $listGroup = $listGroup.length ? $listGroup : this.$('.list-group');\n    $listGroup.append(resp);\n    this.$('#form_element_label, #form_element_name').val('');\n    __WEBPACK_IMPORTED_MODULE_2__shared_show_errors__[\"a\" /* default */].clearErrors(this.$('form#new_collection_element'));\n    Backbone.trigger('collection:element_added');\n    this.makeSortable();\n  },\n\n  templateChanged: function templateChanged(e, resp) {\n    this.$('.forms-edit').html(resp.html);\n    this.makeSortable();\n\n    // Updates the inline form's action URL with the new form ID.\n    this.$('#sort-collection-elements, #new_collection_element').each(function (i, el) {\n      var action = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(el).attr('action').replace(/\\d+/, resp.form_id);\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default()(el).attr('action', action);\n    });\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('collection:edit:loaded', function () {\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__setup_once__[\"a\" /* default */])('.collection-editor', CollectionEditor);\n});\n\n/***/ }),\n\n/***/ 591:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n\n\nvar TALL_EDITORS = ['page_body'];\n\nfunction configureWysiwyg(e, id) {\n  var $editor = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#' + id);\n  if ($editor.length === 0) {\n    return false;\n  }\n\n  $editor.summernote({\n    toolbar: [['style', ['bold', 'italic', 'underline', 'clear']], ['font', ['fontname', 'fontsize']], ['para', ['ul', 'ol', 'paragraph']], ['color', ['color']], ['insert', ['link', 'picture', 'video']], ['view', ['fullscreen', 'codeview', 'help']]],\n    height: TALL_EDITORS.indexOf(id) > -1 ? 280 : 120,\n    fontSizes: ['8', '10', '11', '12', '14', '16', '20', '24', '36', '72'],\n    codemirror: {\n      theme: 'default',\n      mode: 'text/html',\n      lineNumbers: true,\n      tabMode: 'indent',\n      lineWrapping: true\n    }\n  });\n  var $contentField = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#' + id + '_content');\n\n  $editor.summernote('fontSize', '16'); // default\n  $editor.summernote('code', $contentField.val());\n\n  // In order to make an iframe size down with the containing column\n  // or to fit on screen on mobile, you have to apply style to the iframe\n  // and to the containing element. This adds a class to the containing element\n  // that our CSS is looking for.\n  var encapsulateIframes = function encapsulateIframes(html) {\n    if (html.indexOf('iframe') === -1) {\n      return html; // don't do anything if there's no iframe\n    }\n    var $html = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(html);\n    // addClass is idempotent so we just call it every time we save\n    $html.find('iframe').parent().addClass('iframe-responsive-container');\n    // this little goof is just cause jquery doesn't have $el.outerHtml();\n    return __WEBPACK_IMPORTED_MODULE_0_jquery___default()('<div></div>').append($html).html();\n  };\n\n  var updateContentBeforeSave = function updateContentBeforeSave() {\n    var content = encapsulateIframes($editor.summernote('code'));\n    $contentField.val(content);\n  };\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('wysiwyg:submit', updateContentBeforeSave);\n}\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('wysiwyg:setup', configureWysiwyg);\n\n/***/ }),\n\n/***/ 592:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n\n\nvar configureDropZone = function configureDropZone() {\n  Dropzone.options.dropzone = {\n    maxFilesize: 2,\n    paramName: 'image[content]',\n    addRemoveLinks: false,\n    previewsContainer: null,\n    createImageThumbnails: true,\n    previewTemplate: document.querySelector('#dropzone-preview-template').innerHTML,\n\n    init: function init() {\n      this.on('success', function (resp, html) {\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.campaign-images .notice').hide();\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.dz-success').replaceWith(html);\n        var id = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(html).data('image-id');\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.publish('image:success', [resp, id, html]);\n      });\n\n      this.on('addedfiled', function (file) {\n        this.removeFile(file);\n      });\n    }\n  };\n};\n\nvar bindHandlers = function bindHandlers() {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.campaign-images').on('ajax:success', 'a[data-method=delete]', function () {\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).parents('.dz-preview').fadeOut();\n    var imageId = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).parents('[data-image-id]').data('image-id');\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.publish('image:destroyed', imageId);\n  });\n};\n\nvar initialize = function initialize() {\n  console.log('hi');\n  configureDropZone();\n  bindHandlers();\n};\n\nvar addImageOption = function addImageOption(e, file, id, html) {\n  var newOption = \"<option value='\" + id + \"'>\" + file.name + '</option>';\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#page_primary_image_id').append(newOption);\n};\n\nvar removeImageOption = function removeImageOption(e, id) {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#page_primary_image_id').find('option[value=\"' + id + '\"]').remove();\n};\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('dropzone:setup', initialize);\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('image:success', addImageOption);\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('image:destroyed', removeImageOption);\n\n/***/ }),\n\n/***/ 593:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_global_events__ = __webpack_require__(149);\n\n\nvar FormElementCreator = Backbone.View.extend({\n  GENERIC_NAME: 'instruction', // since instruction fields are the only type with no need for a name\n  GENERIC_LABEL: 'hidden', // since hidden fields are the only type with no need for a label\n\n  roles: ['defaultValue', 'defaultRevealer', 'choices', 'label', 'name', 'manyChoices'],\n  modes: {\n    default: ['defaultRevealer', 'label', 'name', 'requirable'],\n    hidden: ['defaultValue', 'name'],\n    instruction: ['label'],\n    choice: ['choices', 'label', 'name', 'requirable'],\n    dropdown: ['manyChoices', 'label', 'name', 'requirable', 'defaultRevealer']\n  },\n\n  events: {\n    'change #form_element_data_type': 'changeFormMode',\n    'click .form-element__remove-choice': 'removeChoice',\n    'click .form-element__add-choice': 'addChoice'\n  },\n\n  globalEvents: {\n    'collection:element_added': 'resetAfterSubmission'\n  },\n\n  initialize: function initialize() {\n    this.changeFormMode({ target: this.$('#form_element_data_type') });\n    __WEBPACK_IMPORTED_MODULE_0__shared_global_events__[\"a\" /* default */].bindEvents(this);\n  },\n  changeFormMode: function changeFormMode(e) {\n    var mode = this.$(e.target).val();\n    if (!this.modes.hasOwnProperty(mode)) {\n      mode = 'default';\n    }\n    this.mode = mode;\n    this.setModeVisuals(mode);\n    this.setModeValues(mode);\n  },\n  resetAfterSubmission: function resetAfterSubmission() {\n    this.setModeVisuals(this.mode);\n    this.setModeValues(this.mode);\n  },\n  setModeVisuals: function setModeVisuals(mode) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = this.roles[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var role = _step.value;\n\n        var $el = this.$('[data-editor-role=' + role + ']');\n        $el.toggleClass('hidden-closed', !this.hasField(role, mode));\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  },\n  setModeValues: function setModeValues(mode) {\n    if (!this.hasField('choices', mode)) {\n      this.resetChoices();\n    }\n    if (!this.hasField('defaultValue', mode)) {\n      this.resetDefaultValue();\n    }\n    if (!this.hasField('requirable', mode)) {\n      this.resetRequired();\n    }\n    if (this.hasField('name', mode)) {\n      this.setNameAwayFromGeneric();\n    } else {\n      this.setNameToGeneric();\n    }\n    if (this.hasField('label', mode)) {\n      this.setLabelAwayFromGeneric();\n    } else {\n      this.setLabelToGeneric();\n    }\n  },\n  hasField: function hasField(role, mode) {\n    return this.modes[mode].indexOf(role) > -1;\n  },\n  setNameToGeneric: function setNameToGeneric() {\n    this.$('input#form_element_name').val(this.GENERIC_NAME);\n  },\n  setNameAwayFromGeneric: function setNameAwayFromGeneric() {\n    var $nameField = this.$('input#form_element_name');\n    if ($nameField.val() === this.GENERIC_NAME) {\n      $nameField.val('');\n    }\n  },\n  setLabelToGeneric: function setLabelToGeneric() {\n    this.$('input#form_element_label').val(this.GENERIC_LABEL);\n  },\n  setLabelAwayFromGeneric: function setLabelAwayFromGeneric() {\n    var $nameField = this.$('input#form_element_label');\n    if ($nameField.val() === this.GENERIC_LABEL) {\n      $nameField.val('');\n    }\n  },\n  resetRequired: function resetRequired() {\n    this.$('input#form_element_required').prop('checked', false);\n  },\n  resetDefaultValue: function resetDefaultValue() {\n    this.$('input#form_element_default_value').val('');\n  },\n  resetChoices: function resetChoices() {\n    this.ensureCopyableChoiceField();\n    this.$('.form-element__choice-fields').html('');\n    this.$('.form-element__many-choices-field textarea').val('');\n    this.$('.form-element__choice-fields').append(this.$copyableChoiceField.clone());\n  },\n  ensureCopyableChoiceField: function ensureCopyableChoiceField() {\n    if (this.$copyableChoiceField === undefined) {\n      this.$copyableChoiceField = this.$('.form-element__choice-field').first().clone();\n      this.$copyableChoiceField.find('input').val('');\n    }\n  },\n  addChoice: function addChoice() {\n    this.ensureCopyableChoiceField();\n    this.$('.form-element__choice-fields').append(this.$copyableChoiceField.clone());\n  },\n  removeChoice: function removeChoice(e) {\n    var $choiceField = this.$(e.target).parents('.form-element__choice-field');\n    if (this.$('.form-element__choice-fields').children().length > 1) {\n      $choiceField.remove();\n    } else {\n      $choiceField.find('input').val('');\n    }\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FormElementCreator);\n\n/***/ }),\n\n/***/ 594:\n/***/ (function(module, exports) {\n\n$(function () {\n  var fixPreviewElement = function fixPreviewElement() {\n    /*\n     *\n     * NOTE\n     * This function is currently not invoked.\n     * The plan is to have the preview div fix itself to view\n     * so it remains visible as the user scrolls down the page.\n     *\n     */\n\n    var $preview = $('.plugin-form-preview');\n\n    var originalPosition = $preview.offset(),\n        originalTop = originalPosition.top;\n\n    var handleSroll = function handleSroll() {\n      var css = { position: 'fixed', top: '0px' };\n      if ($(window).scrollTop() >= originalTop) {\n        $preview.css(css);\n      } else {\n        $preview.css({ position: 'static' });\n      }\n    };\n\n    $(window).scroll(handleSroll);\n  };\n\n  var updatePreview = function updatePreview() {\n    var updater = function updater(plugin_type) {\n      return function (ii, el) {\n        var $el = $(el);\n        plugin_id = $el.data('plugin-id'), url = ['/plugins/forms/', plugin_type, '/', plugin_id].join('');\n\n        $.get(url, function (resp) {\n          $el.find('.plugin-form-preview .content').html(resp);\n        });\n      };\n    };\n    $('.plugin.petition').each(updater('petition'));\n    $('.plugin.fundraiser').each(updater('fundraiser'));\n    $('.plugin.survey').each(updater('survey'));\n  };\n\n  if ($('.plugin-form-preview .content').length > 0) {\n    $.subscribe('plugin:form:preview:update', updatePreview);\n    $.subscribe('page:saved', updatePreview);\n  }\n\n  $('.plugin.petition, .plugin.fundraiser, .plugin.survey').on('ajax:success', function () {\n    $.publish('plugin:form:preview:update');\n  });\n\n  $('.plugin.petition, .plugin.fundraiser, .plugin.survey').on('ajax:error', function (e, xhr, resp) {\n    //for debugging\n    console.log(xhr, resp);\n  });\n});\n\nvar bindCaretToggle = function bindCaretToggle() {\n  $('[data-toggle=\"collapse\"]').on('click', function (e) {\n    $(this).toggleClass('open');\n  });\n};\n\n$.subscribe('plugin:form:loaded', bindCaretToggle);\n\n/***/ }),\n\n/***/ 595:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__setup_once__ = __webpack_require__(327);\n\n\n\nvar LayoutPicker = Backbone.View.extend({\n  events: {\n    'click .radio-group__option': 'updateSelected',\n    'change .layout-type-checkbox': 'showRelevantLayouts'\n  },\n\n  updateSelected: function updateSelected(e) {\n    var $target = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(e.target);\n    if (!$target.hasClass('radio-group__option')) {\n      // for bubbling\n      $target = $target.parents('.radio-group__option');\n    }\n    var name = $target.find('.layout-settings__title').text();\n    $target.parents('.layout-settings').find('.layout-settings__current').text(name);\n    $target.parents('.layout-settings').find('.radio-group__option').removeClass('active');\n    $target.addClass('active');\n    this.updatePlan($target);\n  },\n  updatePlan: function updatePlan($target) {\n    var $input = $target.find('#' + $target.attr('for'));\n    if ($input.attr('name') === 'page[follow_up_liquid_layout_id]') {\n      this.$('#page_follow_up_plan_with_liquid').prop('checked', true);\n    }\n  },\n  showRelevantLayouts: function showRelevantLayouts(e) {\n    var $target = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(e.target);\n    var $allRows = $target.closest('.form-group').find('.radio-group__option');\n    if ($target.is(':checked')) {\n      $allRows.removeClass('hidden');\n    } else {\n      var layoutClass = this.getLayoutClass($target.attr('id'));\n      $allRows.not(layoutClass).addClass('hidden');\n    }\n  },\n  getLayoutClass: function getLayoutClass(layout_select_id) {\n    if (layout_select_id === 'primary') {\n      return '.primary-layout';\n    } else if (layout_select_id === 'follow-up') {\n      return '.post-action-layout';\n    }\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('layout:edit pages:new', function () {\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__setup_once__[\"a\" /* default */])('.layout-settings', LayoutPicker);\n});\n\n/***/ }),\n\n/***/ 596:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n\n\n\n\nvar slugChecker = Backbone.Model.extend({\n  url: '/action_kit/check_slug',\n\n  defaults: {\n    valid: null,\n    slug: ''\n  }\n});\n\nvar slugView = Backbone.View.extend({\n  el: '#new_page',\n\n  events: {\n    'keyup #page_title': 'generateSlug',\n    'change #page_title': 'generateSlug',\n    'keyup #page_slug': 'resetFeedback',\n    'click #check_slug_available': 'checkSlugAvailable',\n    submit: 'submit'\n  },\n\n  initialize: function initialize() {\n    this.slugChecker = new slugChecker();\n    this.slugChecker.on('change:valid', _.bind(this.updateViewWithValid, this));\n    this.cacheDomElements();\n    this.checking = false;\n  },\n  cacheDomElements: function cacheDomElements() {\n    this.$title = this.$('#page_title');\n    this.$slug = this.$('#page_slug');\n    this.$feedback = this.$('.form-group.slug');\n    this.$checkButton = this.$('#check_slug_available');\n    this.$submit = this.$('.submit-new-page');\n  },\n  updateViewWithValid: function updateViewWithValid() {\n    var valid = this.slugChecker.get('valid');\n\n    this.$submit.removeClass('disabled');\n\n    this.$('.loading').hide();\n\n    this.$('.form-group.slug').removeClass('has-error has-success has-feedback');\n\n    this.$('.form-group.slug .glyphicon').hide();\n\n    if (valid) {\n      this.$('.form-group.slug').addClass('has-success has-feedback');\n      this.$('.form-group.slug .glyphicon-ok').show();\n    } else {\n      this.$('.slug-field').show();\n\n      this.$('.form-group.slug').addClass('has-error has-feedback');\n      this.$('.form-group.slug .glyphicon-remove').show();\n    }\n  },\n  generateSlug: function generateSlug() {\n    var slug = getSlug(this.$title.val());\n    this.resetFeedback();\n    this.$slug.val(slug);\n  },\n  checkSlugAvailable: function checkSlugAvailable(e, cb) {\n    var _this = this;\n\n    var slug = void 0;\n\n    e.preventDefault();\n    this.updateSlug();\n    slug = this.$slug.val();\n\n    this.checking = true;\n\n    this.$submit.addClass('disabled');\n\n    this.$('.loading').show();\n\n    this.slugChecker.set('slug', slug);\n\n    this.slugChecker.save().done(function () {\n      _this.checking = false;\n      _this.$checkButton.text('Check if name is available').removeClass('disabled');\n\n      if (cb) {\n        cb.call(_this);\n      }\n    });\n  },\n  updateSlug: function updateSlug() {\n    var slug = getSlug(this.$slug.val());\n    this.resetFeedback();\n    this.$slug.val(slug);\n  },\n  resetFeedback: function resetFeedback() {\n    this.$feedback.removeClass('has-error has-success has-feedback');\n  },\n  submit: function submit(e) {\n    var _this2 = this;\n\n    e.preventDefault();\n\n    this.$checkButton.text('Checking...').addClass('disabled');\n\n    if (!this.slugChecker.get('valid')) {\n      this.checkSlugAvailable(e, function () {\n        if (_this2.slugChecker.get('valid')) {\n          _this2.$el.unbind();\n          _this2.$el.submit();\n        }\n      });\n    } else {\n      this.$el.unbind();\n      this.$el.submit();\n    }\n  }\n});\n\nvar initialize = function initialize() {\n  new slugView();\n};\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('pages:new', initialize);\n\n/***/ }),\n\n/***/ 597:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_show_errors__ = __webpack_require__(147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n\n\n\nvar PageModel = Backbone.Model.extend({\n  urlRoot: \"/api/pages\",\n\n  initialize: function initialize() {\n    this.lastSaved = null;\n  },\n\n  // override save to only actually save if it's new data\n  save: function save(data, callbacks) {\n    if (__WEBPACK_IMPORTED_MODULE_1_lodash___default.a.isEqual(data, this.lastSaved)) {\n      if (typeof callbacks.unchanged === \"function\") {\n        callbacks.unchanged();\n      }\n    } else {\n      this.lastSaved = data;\n      Backbone.Model.prototype.save.call(this, data, __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.extend({ patch: true }, callbacks));\n    }\n  },\n\n  setLastSaved: function setLastSaved(data) {\n    this.lastSaved = data;\n  }\n});\n\nvar PageEditBar = Backbone.View.extend({\n  el: \".page-edit-bar\",\n\n  events: {\n    \"click .page-edit-bar__save-button\": \"save\",\n    \"click .page-edit-bar__error-message\": \"findError\",\n    \"change .page-edit-bar__toggle-autosave .onoffswitch__checkbox\": \"toggleAutosave\"\n  },\n\n  initialize: function initialize() {\n    this.outstandingSaveRequest = false;\n    this.addStepsToSidebar();\n    this.model = new PageModel();\n    this.setupAutosave();\n    this.$saveBtn = this.$(\".page-edit-bar__save-button\");\n    $(\"body\").scrollspy({ target: \".scrollspy\", offset: 150 });\n    this.policeHeights();\n  },\n\n  addStepsToSidebar: function addStepsToSidebar() {\n    var _this = this;\n\n    var $existing = $(\"ul.page-edit-bar__step-list li\");\n    $(\".page-edit-step\").each(function (ii, step) {\n      _this.addStepToSidebar($(step));\n    });\n    $existing.remove();\n    this.$(\"ul.page-edit-bar__step-list\").append($existing);\n  },\n\n  addStepToSidebar: function addStepToSidebar($step) {\n    var $ul = this.$(\"ul.page-edit-bar__step-list\");\n    var title = $step.find(\".page-edit-step__title\")[0].childNodes[0].nodeValue.trim();\n    var id = $step.attr(\"id\");\n    var icon = $step.data(\"icon\") || \"cubes\";\n    var link_href = $step.data(\"link-to\") ? $step.data(\"link-to\") : \"#\" + id;\n    var link_target = $step.data(\"link-to\") ? \"_blank\" : \"_self\";\n    var li = \"<li><a href=\\\"\" + link_href + \"\\\" target=\\\"\" + link_target + \"\\\"><i class=\\\"fa fa-\" + icon + \"\\\"></i>\" + title + \"</a></li>\";\n    $ul.append(li);\n  },\n\n  readData: function readData() {\n    var _this2 = this;\n\n    var data = {};\n    $(\"form.one-form\").each(function (ii, form) {\n      var $form = $(form);\n      var type = $form.data(\"type\") || \"base\";\n      if (!data.hasOwnProperty(type)) {\n        data[type] = {};\n      }\n      $.extend(data[type], _this2.serializeForm($form));\n    });\n    data.id = data.page[\"page[id]\"];\n    return data;\n  },\n\n  serializeForm: function serializeForm($form) {\n    var data = {};\n    __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.each($form.serializeArray(), function (pair) {\n      // this is to handle form arrays cause their name ends in []\n      if (pair.name.endsWith(\"[]\")) {\n        var name = pair.name.slice(0, -2);\n        if (!data.hasOwnProperty(name)) {\n          data[name] = [];\n        }\n        data[name].push(pair.value);\n      } else {\n        data[pair.name] = pair.value;\n      }\n    });\n    return data;\n  },\n\n  save: function save() {\n    $.publish(\"wysiwyg:submit\"); // for summernote + codemirror to update content\n    if (!this.outstandingSaveRequest) {\n      this.disableSubmit();\n      this.model.save(this.readData(), {\n        success: this.saved.bind(this),\n        error: this.saveFailed.bind(this),\n        unchanged: this.enableSubmit.bind(this)\n      });\n    }\n  },\n\n  saved: function saved(e, data) {\n    if (data.refresh) {\n      location.reload();\n    }\n    this.enableSubmit();\n    $.publish(\"page:saved\", data);\n    $(\".page-edit-bar__save-box\").removeClass(\"page-edit-bar__save-box--has-error\");\n    $(\".page-edit-bar__error-message\").text(\"\");\n    $(\".page-edit-bar__last-saved\").text(I18n.t(\"pages.edit.last_saved_at\", { time: this.currentTime() }));\n    this.policeHeights();\n  },\n\n  currentTime: function currentTime() {\n    var now = new Date();\n    var minutes = (\"0\" + now.getMinutes()).slice(-2); // for leading zero\n    var seconds = (\"0\" + now.getSeconds()).slice(-2); // for leading zero\n    return now.getHours() + \":\" + minutes + \":\" + seconds;\n  },\n\n  saveFailed: function saveFailed(e, data) {\n    console.error(\"Save failed with\", e, data);\n    this.enableSubmit();\n    $(\".page-edit-bar__save-box\").addClass(\"page-edit-bar__save-box--has-error\");\n    if (data.status == 422) {\n      __WEBPACK_IMPORTED_MODULE_0__shared_show_errors__[\"a\" /* default */].show(e, data);\n      $(\".page-edit-bar__error-message\").text(I18n.t(\"pages.edit.user_error\"));\n      $.publish(\"page:errors\");\n    } else {\n      $(\".page-edit-bar__error-message\").text(I18n.t(\"pages.edit.unknown_error\"));\n    }\n    this.policeHeights();\n  },\n\n  findError: function findError() {\n    if (this.$(\".page-edit-bar__save-box\").hasClass(\"page-edit-bar__save-box--has-error\")) {\n      if ($(\".has-error\").length > 0) {\n        $(\"html, body\").animate({\n          scrollTop: $(\".has-error\").first().offset().top\n        }, 500);\n      }\n    }\n  },\n\n  toggleAutosave: function toggleAutosave(e) {\n    var _this3 = this;\n\n    this.autosave = !this.autosave;\n    this.$(\".page-edit-bar__toggle-autosave\").find(\".toggle-button\").toggleClass(\"btn-primary\");\n    if (this.autosave) {\n      this.$(\".page-edit-bar__btn-holder\").addClass(\"page-edit-bar__btn-holder--hidden\");\n    } else {\n      this.$(\".page-edit-bar__btn-holder\").removeClass(\"page-edit-bar__btn-holder--hidden\");\n    }\n    window.setTimeout(function () {\n      _this3.policeHeights();\n    }, 200);\n  },\n\n  disableSubmit: function disableSubmit() {\n    this.outstandingSaveRequest = true;\n    this.$saveBtn.text(I18n.t(\"pages.edit.saving\"));\n    this.$saveBtn.addClass(\"disabled\");\n  },\n\n  enableSubmit: function enableSubmit() {\n    this.outstandingSaveRequest = false;\n    this.$saveBtn.text(I18n.t(\"pages.edit.save_work\"));\n    this.$saveBtn.removeClass(\"disabled\");\n  },\n\n  setupAutosave: function setupAutosave() {\n    var _this4 = this;\n\n    var SAVE_PERIOD = 5000; // milliseconds\n    var shouldAutosave = this.$(\".page-edit-bar__toggle-autosave\").data(\"autosave\") == true;\n    this.autosave = true;\n    this.model.setLastSaved(this.readData());\n    if (shouldAutosave != this.autosave) {\n      this.toggleAutosave();\n    }\n    window.setInterval(function () {\n      if (_this4.autosave) {\n        _this4.save();\n      } else {\n        _this4.showUnsavedAlert();\n      }\n    }, SAVE_PERIOD);\n  },\n\n  showUnsavedAlert: function showUnsavedAlert() {\n    $.publish(\"wysiwyg:submit\"); // update wysiwyg\n    var $lastSaved = $(\".page-edit-bar__last-saved\");\n    var noNotice = $lastSaved.find(\".page-edit-bar__unsaved-notice\").length < 1;\n    var unsavedDataExists = !__WEBPACK_IMPORTED_MODULE_1_lodash___default.a.isEqual(this.model.lastSaved, this.readData());\n    if (unsavedDataExists) {\n      if (noNotice) {\n        $lastSaved.append(\"<div class=\\\"page-edit-bar__unsaved-notice\\\">\" + I18n.t(\"pages.edit.unsaved_changes\") + \"</div>\");\n      }\n    } else {\n      $lastSaved.find(\".page-edit-bar__unsaved-notice\").remove();\n    }\n  },\n\n  policeHeights: function policeHeights() {\n    if ($(window).width() <= 600) {\n      return;\n    }\n    var height = $(window).height() - this.$(\".page-edit-bar__logo\").height() - this.$(\".page-edit-bar__save-box\").height() - this.$(\".page-edit-bar__btn-holder\").outerHeight();\n    this.$(\".page-edit-bar__step-list\").css(\"height\", height + \"px\");\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PageEditBar);\n\n/***/ }),\n\n/***/ 598:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__setup_once__ = __webpack_require__(327);\n\n\n$(function () {\n  var ActivationToggle = Backbone.View.extend({\n    events: {\n      'ajax:before': 'toggleState',\n      'ajax:success': 'handleSuccess',\n      'ajax:error': 'handleError',\n      'change .onoffswitch__checkbox': 'handleClick'\n    },\n\n    initialize: function initialize() {\n      this.$stateInput = this.$('.activation-toggle-field');\n      this.$checkbox = this.$('.onoffswitch__checkbox');\n      this.state = this.$stateInput.val();\n    },\n\n    handleClick: function handleClick(e) {\n      if (this.state == 'published' && this.$stateInput.data('confirm-turning-off')) {\n        if (!window.confirm(this.$stateInput.data('confirm-turning-off'))) {\n          this.toggleButton();\n          return false;\n        }\n      }\n      this.$el.submit();\n    },\n\n    toggleButton: function toggleButton() {\n      this.$checkbox.prop('checked', !this.$checkbox.prop('checked'));\n    },\n\n    handleSuccess: function handleSuccess(e, data) {},\n\n    handleError: function handleError(xhr, status, error) {\n      console.error('error', status, error);\n      this.toggleButton();\n      this.toggleState();\n    },\n\n    toggleState: function toggleState(e) {\n      if ($(e.target).find('input.onoffswitch__checkbox').hasClass('use-publish-states')) {\n        this.state = this.state === 'published' ? 'unpublished' : 'published';\n      } else {\n        this.state = this.state === 'true' ? 'false' : 'true';\n      }\n      this.$stateInput.val(this.state);\n    }\n  });\n\n  $.subscribe('activation:toggle', function () {\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__setup_once__[\"a\" /* default */])('form.activation-toggle', ActivationToggle);\n  });\n});\n\n/***/ }),\n\n/***/ 599:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n\n\nvar searchConfig = function searchConfig() {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.page-filter__reset').click(function () {\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('select.selectize-container').map(function (index, item) {\n      item.selectize.clear();\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).closest('form').find('.form-control').map(function (index, item) {\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default()(item).val('');\n    });\n  });\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#pages-table').DataTable({\n    /* Disable initial sort */\n    aaSorting: []\n  });\n};\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('search:load', searchConfig);\n\n/***/ }),\n\n/***/ 600:\n/***/ (function(module, exports) {\n\n$(function () {\n  $('.selectize-container').selectize({\n    plugins: ['remove_button'],\n    closeAfterSelect: true\n  });\n\n  var lastVal;\n  $('.selectize-container--clear-on-open').selectize({\n    onDropdownOpen: function onDropdownOpen() {\n      lastVal = this.getValue();\n      this.clear();\n    },\n    onDropdownClose: function onDropdownClose() {\n      if (this.items.length < 1) this.setValue(lastVal);\n    },\n    closeAfterSelect: true\n  });\n});\n\n/***/ }),\n\n/***/ 601:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__setup_once__ = __webpack_require__(327);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__shared_global_events__ = __webpack_require__(149);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_clipboard__ = __webpack_require__(725);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_clipboard___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_clipboard__);\n\n\n\n\n\n\nvar SharesEditor = Backbone.View.extend({\n  events: {\n    'ajax:success form.shares-editor__delete-variant': 'deleteVariant',\n    'click .shares-editor__toggle-edit': 'toggleEditor',\n    'click .shares-editor__new-type-toggle .btn': 'switchVariantForm',\n    'click .shares-editor__view-toggle .btn': 'switchView',\n    'ajax:success form.shares-editor__new-form': 'clearFormAndConformView'\n  },\n\n  globalEvents: {\n    'page:saved': 'updateSummaryRows',\n    'page:errors': 'openEditorForErrors',\n    'image:success': 'addImageSelectors',\n    'image:destroyed': 'pruneImageSelectors'\n  },\n\n  initialize: function initialize() {\n    this.view = 'summary';\n    __WEBPACK_IMPORTED_MODULE_3__shared_global_events__[\"a\" /* default */].bindEvents(this);\n  },\n\n  deleteVariant: function deleteVariant(e) {\n    var $target = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(e.target);\n    var $summary_row = $target.parents('.shares-editor__summary-row');\n    var $stats_row = $summary_row.next('.shares-editor__stats-row');\n    var $edit_row = $stats_row.next('.shares-editor__edit-row');\n    $summary_row.remove();\n    $stats_row.remove();\n    $edit_row.remove();\n  },\n\n  editRow: function editRow($row) {\n    if (!$row.hasClass('shares-editor__stats-row')) {\n      $row = $row.next('.shares-editor__stats-row');\n    }\n    return $row.next('.shares-editor__edit-row');\n  },\n\n  toggleEditor: function toggleEditor(e) {\n    var $target = this.$(e.target);\n    $target = $target.is('tr') ? $target : $target.parents('tr');\n    var $btn = $target.find('.shares-editor__toggle-edit');\n    this.editRow($target).toggleClass('hidden-closed');\n    $btn.text($btn.text() == 'Edit' ? 'Done' : 'Edit');\n  },\n\n  openEditor: function openEditor($edit_row) {\n    var $prev = $edit_row.prev('.shares-editor__summary-row');\n    var $btn = $prev.find('.shares-editor__toggle-edit');\n    $btn.text('Done');\n    $edit_row.removeClass('hidden-closed');\n  },\n\n  switchVariantForm: function switchVariantForm(e) {\n    var $target = this.$(e.target);\n    var desired = $target.data('state');\n    if (desired) {\n      this.$('.shares-editor__new-type-toggle .btn').removeClass('btn-primary');\n      $target.addClass('btn-primary');\n      this.$('.shares-editor__new-form').addClass('hidden-closed');\n      this.$('.shares-editor__new-form[data-share=\"' + desired + '\"]').removeClass('hidden-closed');\n    }\n  },\n\n  switchView: function switchView(e) {\n    var $target = this.$(e.target);\n    var desired = $target.data('state');\n    if (desired) {\n      this.setView(desired);\n    }\n  },\n\n  setView: function setView(desired) {\n    this.view = desired;\n    this.$('.shares-editor__view-toggle .btn').removeClass('btn-primary');\n    this.$('[data-state=\"' + desired + '\"]').addClass('btn-primary');\n    if (desired === 'summary') {\n      this.$('.shares-editor__summary-row').removeClass('hidden-closed');\n      this.$('.shares-editor__stats-row').addClass('hidden-closed');\n      this.$('.shares-editor__stats-heading').addClass('hidden-closed');\n    } else {\n      this.$('.shares-editor__summary-row').addClass('hidden-closed');\n      this.$('.shares-editor__stats-row').removeClass('hidden-closed');\n      this.$('.shares-editor__stats-heading').removeClass('hidden-closed');\n    }\n  },\n\n  clearFormAndConformView: function clearFormAndConformView(e) {\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(e.target).find('input[type=\"text\"], textarea').val('');\n    this.setView(this.view); // make new rows conform\n  },\n\n  openEditorForErrors: function openEditorForErrors() {\n    this.openEditor(this.$('.has-error').parents('.shares-editor__edit-row'));\n  },\n\n  updateSummaryRows: function updateSummaryRows(e, data) {\n    var _this = this;\n\n    // this only updates existing shares. new ones are appended by\n    // code in view/share/shares/create.js.erb, using rails UJS\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.get('/api/pages/' + data.id + '/share-rows', function (rows) {\n      __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.each(rows, function (row) {\n        var $row = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(row.html);\n        var $original = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#' + $row.prop('id'));\n        if ($original.hasClass('hidden-closed')) {\n          $row.addClass('hidden-closed');\n        }\n        $row = $original.replaceWith($row);\n        $row = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#' + $row.prop('id'));\n        if (!_this.editRow($row).hasClass('hidden-closed')) {\n          $row.find('.shares-editor__toggle-edit').text('Done');\n        }\n      });\n    });\n  },\n\n  addImageSelectors: function addImageSelectors(e, file, id, html) {\n    var newOption = '<option value=\\'' + id + '\\'>' + file.name + '</option>';\n    this.$('.shares-editor__image-selector').append(newOption);\n  },\n\n  pruneImageSelectors: function pruneImageSelectors(e, id) {\n    this.$('option[value=\"' + id + '\"]').remove();\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('shares:edit', function () {\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__setup_once__[\"a\" /* default */])('.shares-editor', SharesEditor);\n});\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default()(function () {\n  new __WEBPACK_IMPORTED_MODULE_4_clipboard___default.a('.share-copy-url');\n\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.shares-editor__existing').on('click', '.share-copy-url', function (e) {\n    e.preventDefault();\n  });\n});\n\n/***/ }),\n\n/***/ 602:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__setup_once__ = __webpack_require__(327);\n\n\n\nvar Sidebar = Backbone.View.extend({\n  events: {\n    'click .sidebar__header-link': 'toggleGroup'\n  },\n\n  toggleGroup: function toggleGroup(e) {\n    var $group = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(e.target).parents('.sidebar__group');\n    $group.toggleClass('sidebar__group--closed sidebar__group--open');\n  }\n});\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('sidebar:nesting', function () {\n  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__setup_once__[\"a\" /* default */])('.sidebar', Sidebar);\n});\n\n/***/ }),\n\n/***/ 603:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_global_events__ = __webpack_require__(149);\n\n\nvar SurveyEditor = Backbone.View.extend({\n  el: '.survey',\n\n  events: {\n    'sortupdate .survey__forms': 'handleSort'\n  },\n\n  globalEvents: {\n    'survey:form_added': 'makeSortable'\n  },\n\n  initialize: function initialize() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this.makeSortable();\n    this.id = this.$el.data('plugin-id');\n    __WEBPACK_IMPORTED_MODULE_0__shared_global_events__[\"a\" /* default */].bindEvents(this);\n  },\n  makeSortable: function makeSortable() {\n    this.$('.survey__forms').sortable();\n  },\n  handleSort: function handleSort(e, ui) {\n    var _this = this;\n\n    if (!$(e.target).hasClass('survey__forms')) return;\n    var ids = ui.item.parent().children().map(function (i, el) {\n      return _this.$(el).data('id');\n    }).get();\n    this.saveFormOrder(ids);\n  },\n  saveFormOrder: function saveFormOrder(ids) {\n    $.ajax('/plugins/surveys/' + this.id + '/sort', {\n      method: 'PUT',\n      data: { form_ids: ids.join(',') }\n    }).done(function () {\n      $.publish('plugin:form:preview:update');\n    });\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SurveyEditor);\n\n/***/ }),\n\n/***/ 604:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n// This depends on codemirror and its modes being required in\n// `app/assets/javascripts/application.js`\n\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default()(function () {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.syntax-highlighting').each(function (idx, el) {\n    var mode = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(el).data('highlight-mode') || 'htmlmixed';\n    var cm = CodeMirror.fromTextArea(el, {\n      mode: mode,\n      theme: '3024-night'\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('wysiwyg:submit', cm.save);\n  });\n});\n\n/***/ }),\n\n/***/ 605:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.subscribe('pages:new pages:edit form:edit pages:analytics', function () {\n  __WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-toggle=\"tooltip\"]').tooltip();\n});\n\n/***/ }),\n\n/***/ 668:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_pub_sub__ = __webpack_require__(380);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__shared_show_errors__ = __webpack_require__(147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__campaigner_facing_syntax_highlighting__ = __webpack_require__(604);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__campaigner_facing_dropzone_image_upload__ = __webpack_require__(592);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__campaigner_facing_selectize_config__ = __webpack_require__(600);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__campaigner_facing_selectize_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__campaigner_facing_selectize_config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__campaigner_facing_search__ = __webpack_require__(599);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__campaigner_facing_configure_wysiwyg__ = __webpack_require__(591);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__campaigner_facing_form_preview__ = __webpack_require__(594);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__campaigner_facing_form_preview___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__campaigner_facing_form_preview__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__campaigner_facing_ajax__ = __webpack_require__(588);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__campaigner_facing_page__ = __webpack_require__(596);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__campaigner_facing_plugins_toggle__ = __webpack_require__(598);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__campaigner_facing_sidebar__ = __webpack_require__(602);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__campaigner_facing_tooltips__ = __webpack_require__(605);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__campaigner_facing_collection_editor__ = __webpack_require__(590);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__campaigner_facing_shares_editor__ = __webpack_require__(601);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__campaigner_facing_actions_editor__ = __webpack_require__(587);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__campaigner_facing_layout_picker__ = __webpack_require__(595);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__campaigner_facing_page_edit_bar__ = __webpack_require__(597);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__campaigner_facing_analytics__ = __webpack_require__(589);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__campaigner_facing_survey_editor__ = __webpack_require__(603);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__campaigner_facing_form_element_creator__ = __webpack_require__(593);\n// Copied over from previous file in\n// assets/javascripts/application.js manifest\n// A lot of this might be unnecessary (and it will do well\n// to reduce bundle size)\n\n// TODO: Refactor this to *not* get imported into the global scope\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nObject.assign(window, {\n  PageEditBar: __WEBPACK_IMPORTED_MODULE_17__campaigner_facing_page_edit_bar__[\"a\" /* default */],\n  Analytics: __WEBPACK_IMPORTED_MODULE_18__campaigner_facing_analytics__[\"a\" /* default */],\n  SurveyEditor: __WEBPACK_IMPORTED_MODULE_19__campaigner_facing_survey_editor__[\"a\" /* default */],\n  FormElementCreator: __WEBPACK_IMPORTED_MODULE_20__campaigner_facing_form_element_creator__[\"a\" /* default */]\n});\n\n/***/ }),\n\n/***/ 724:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(800)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.container = options.container;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                this.container.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    this.container.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    this.container.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.trigger) {\n                    this.trigger.focus();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});\n\n/***/ }),\n\n/***/ 725:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(724), __webpack_require__(806), __webpack_require__(766)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n                this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    container: this.container,\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});\n\n/***/ }),\n\n/***/ 732:\n/***/ (function(module, exports) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n\n/***/ 733:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar closest = __webpack_require__(732);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n\n/***/ 765:\n/***/ (function(module, exports) {\n\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n/***/ }),\n\n/***/ 766:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar is = __webpack_require__(765);\nvar delegate = __webpack_require__(733);\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n/***/ }),\n\n/***/ 800:\n/***/ (function(module, exports) {\n\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n/***/ }),\n\n/***/ 806:\n/***/ (function(module, exports) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\nmodule.exports = window.Backbone;\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// campaigner_facing-0883100c07190a4df197.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/packs/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 668);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 136a2c1eb08c679b5bb1","// This file adds error messages inline to forms.\n// For it to work properly, you need to pass data from the controller like:\n//   format.json { render json: {errors: link.errors, name: 'link'}, status: :unprocessable_entity }\n// The name field is for if the form element names are prefixed, eg 'link[title]'\n\nexport default {\n  show(e, data) {\n    if (!e || !data || !data.responseText\n        || !data.getResponseHeader('Content-Type').match(/json/i)\n        || data.status != 422) {\n      return; // no reason to try if we dont have what we need\n    }\n\n    // use the relevant form if the event was a form submission.\n    // otherwise, search in all the forms on the page.\n    let $form = $(e.target) && $(e.target).length ? $(e.target) : $('form');\n    let response = $.parseJSON(data.responseText);\n    ErrorDisplay.clearErrors($form);\n    $.each(response.errors, (f, m) => {\n      ErrorDisplay.showError(f, m, $form, response);\n    });\n  },\n\n  clearErrors($form) {\n    $form.find('.has-error').removeClass('has-error');\n    $form.find('.error-msg').remove();\n  },\n\n  showError(field_name, msgs, $form, response) {\n    let $field = ErrorDisplay.findField(field_name, $form, response);\n    $field.addClass('has-error').parent().addClass('has-error');\n    $field.parent().append(ErrorDisplay.errorMsg(field_name, msgs));\n    $field.on('change', e => {\n      ErrorDisplay.hideError(e);\n    });\n  },\n\n  errorMsg(field_name, msgs) {\n    let msg = typeof msgs === 'string' ? msgs : msgs[0];\n    let prefix = window.I18n ? I18n.t('errors.this_field') : 'The field';\n    return `<div class='error-msg'>${prefix} ${msg}</div>`;\n  },\n\n  hideError(e) {\n    $(e.target).removeClass('has-error').parent().removeClass('has-error');\n    $(e.target).siblings('.error-msg').remove();\n    $(e.target).parent('.error-msg').remove();\n  },\n\n  findField(field_name, $form, response) {\n    if (response.name) {\n      field_name = [response.name, '[', field_name, ']'].join('');\n    }\n    var $field = $form.find(`[name=\"${field_name}\"]`);\n    if (!$field.length) {\n      $field = $form.find(':submit').prev();\n    } else if (\n      $field.attr('type') === 'radio' &&\n      $field.parents('.radio-container').length\n    ) {\n      return $field.parents('.radio-container');\n    }\n    return $field;\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/shared/show_errors.js","// allow backbone views to use a hash to declaratively\n// bind their methods to events called through\n// $.publish or Backbone.trigger\nimport $ from \"jquery\";\nimport _ from \"lodash\";\nimport Backbone from \"backbone\";\n\nexport default {\n  bindEvents(view) {\n    const events = view.globalEvents;\n    if (!events || !_.isObject(events)) return;\n    for (const eventName in events) {\n      const methodName = events[eventName];\n      const method = view[methodName];\n      if (method) {\n        Backbone.on(eventName, method, view);\n        $.subscribe(eventName, method.bind(view));\n      }\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/shared/global_events.js","module.exports = window.$;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"window.$\"\n// module id = 24\n// module chunks = 0 1 2 3 5","module.exports = window._;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"window._\"\n// module id = 26\n// module chunks = 0 1 2 3 4 5","function setupOnce(selector, viewClass) {\n  $(selector).each(function(ii, el) {\n    let $el = $(el);\n    if ($el.data('js-inited') != true) {\n      let toggle = new viewClass({ el: $el });\n      $el.data('js-inited', true);\n    }\n  });\n}\n\nexport default setupOnce;\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/setup_once.js","import $ from 'jquery';\n\nconst setupPubSub = function($) {\n  const o = $({});\n\n  $.subscribe = function() {\n    o.on.apply(o, arguments);\n  };\n\n  $.unsubscribe = function() {\n    o.off.apply(o, arguments);\n  };\n\n  $.publish = function() {\n    o.trigger.apply(o, arguments);\n  };\n};\n\nsetupPubSub($);\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/shared/pub_sub.js","import $ from 'jquery';\nimport setupOnce from './setup_once';\n\nconst ActionsEditor = Backbone.View.extend({\n  events: {\n    'click .action-publisher .btn': 'handleClick',\n    'ajax:success form.shares-editor__new-form': 'clearFormAndConformView',\n  },\n\n  initialize() {\n    this.pageId = this.$el.data('page-id');\n  },\n\n  updateButtons($publisher, desired) {\n    $publisher.find('.btn-primary').removeClass('btn-primary');\n    $publisher.find('[data-state=\"' + desired + '\"]').addClass('btn-primary');\n  },\n\n  handleClick(e) {\n    const $target = $(e.target);\n    const $publisher = $target.parents('.action-publisher');\n    const current = $publisher.find('.btn-primary').data('state');\n    const desired = $target.data('state');\n    this.updateAction($publisher, desired, current);\n  },\n\n  updateAction($publisher, desired, last) {\n    this.updateButtons($publisher, desired);\n    $.ajax(`/api/pages/${this.pageId}/actions/${$publisher.data('id')}`, {\n      method: 'PUT',\n      data: { publish_status: desired },\n    }).fail(() => {\n      this.updateButtons($publisher, last);\n    });\n  },\n});\n\n$.subscribe('actions:edit', function() {\n  setupOnce('.actions-editor', ActionsEditor);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/actions_editor.js","import ErrorDisplay from '../shared/show_errors';\n\n$(function() {\n  var handleStart = function(e, i) {\n    var button = $(e.target).find('.xhr-feedback');\n\n    $(e.target).find('.xhr-feedback-saving').remove();\n\n    button.prop('disabled', true);\n\n    var feedback = $('<span />')\n      .addClass('label label-success xhr-feedback-saving')\n      .text('Saving...');\n\n    button.after(feedback);\n  };\n\n  var enableButton = function(e) {\n    var button = $(e.target).find('.xhr-feedback');\n    button.prop('disabled', false);\n  };\n\n  var handleError = function(e, data) {\n    enableButton(e);\n    var feedback = $('.xhr-feedback-saving')\n      .removeClass('label-success')\n      .addClass('label-danger')\n      .text('Save failed.');\n    ErrorDisplay.show(e, data);\n  };\n\n  var handleSuccess = function(e) {\n    enableButton(e);\n    var feedback = $('.xhr-feedback-saving').text('Saved!');\n\n    window.setTimeout(function() {\n      feedback.fadeOut();\n    }, 1000);\n  };\n\n  $('body').on('ajax:beforeSend', handleStart);\n  $('body').on('ajax:success', handleSuccess);\n  $('body').on('ajax:error', handleError);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/ajax.js","'use strict';\nconst Y_AXIS_LABEL_LIMIT = 20;\n\nclass AnalyticsDashboard {\n  static get yAxisLabelLimit() {\n    return Y_AXIS_LABEL_LIMIT;\n  }\n\n  constructor() {\n    this.barPadding = 1;\n    this.bottomMargin = 100;\n    this.margins = { bottom: 30 };\n    this.xAxis = true;\n    this.labels = true;\n  }\n\n  render() {\n    this.svg\n      .attr('width', this.width)\n      .attr('height', this.height + this.margins.bottom);\n\n    this.setYScale(this.data);\n    this.draw();\n\n    if (this.labels) {\n      this.drawLabels();\n    }\n\n    if (this.xAxis) {\n      this.drawAxis();\n    }\n  }\n\n  update() {\n    this.setYScale(this.data);\n\n    this.svg\n      .selectAll('.bar')\n      .data(this.data)\n      .transition()\n      .duration(750)\n      .attr('height', d => {\n        return this.scale(d.value);\n      })\n      .attr('y', d => {\n        return this.height - this.scale(d.value);\n      });\n\n    this.drawLabels();\n\n    this.svg\n      .selectAll('.label')\n      .data(this.data)\n      .transition()\n      .duration(1000)\n      .text(d => {\n        return d.value;\n      })\n      .attr('y', this.setYForLabel.bind(this))\n      .attr('fill', this.setFillForLabel.bind(this));\n  }\n\n  setYForLabel(d) {\n    let scaled = this.scale(d.value), y = this.height - scaled + 15;\n\n    if (scaled < AnalyticsDashboard.yAxisLabelLimit) {\n      y -= AnalyticsDashboard.yAxisLabelLimit;\n    }\n\n    return y;\n  }\n\n  setFillForLabel(d) {\n    return this.scale(d.value) < 20 ? '#333' : '#fff';\n  }\n\n  draw() {\n    this.svg\n      .selectAll('.bar')\n      .data(this.data)\n      .enter()\n      .append('rect')\n      .attr('width', this.width / this.data.length - this.barPadding)\n      .attr('fill', this.fill)\n      .attr('class', 'bar')\n      .attr('height', d => {\n        return this.scale(d.value);\n      })\n      .attr('y', d => {\n        return this.height - this.scale(d.value);\n      })\n      .attr('x', (d, i) => {\n        return i * (this.width / this.data.length);\n      });\n  }\n\n  drawLabels() {\n    this.svg\n      .selectAll('text')\n      .data(this.data)\n      .enter()\n      .append('text')\n      .text(d => {\n        return d.value;\n      })\n      .attr('x', (d, i) => {\n        return (\n          i * (this.width / this.data.length) +\n          (this.width / this.data.length - this.barPadding) / 2\n        );\n      })\n      .attr('y', this.setYForLabel.bind(this))\n      .attr('class', 'label')\n      .attr('text-anchor', 'middle')\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', '11px')\n      .attr('fill', this.setFillForLabel.bind(this));\n  }\n\n  drawAxis() {\n    var xScale = d3.scale\n      .ordinal()\n      .domain(\n        this.data.map((d, i) => {\n          return moment(d.date).format(this.axisDateFormat);\n        })\n      )\n      .rangeBands([0, this.width]);\n\n    var xAxis = d3.svg.axis().scale(xScale).orient('bottom');\n\n    this.svg\n      .append('g')\n      .attr('class', 'x axis')\n      .attr('transform', `translate(0, ${this.height})`)\n      .call(xAxis);\n  }\n\n  setYScale(dataset) {\n    this.scale = d3.scale\n      .linear()\n      .domain([\n        0,\n        d3.max(dataset, d => {\n          return d.value;\n        }),\n      ])\n      .range([0, this.height]);\n  }\n}\n\nclass Conductor {\n  constructor(id, chart) {\n    this.id = id;\n    this.chart = chart;\n    this.$totalAll = $('.total-actions-all');\n    this.$totalNew = $('.total-actions-new');\n\n    $('button#refresh-data').on('click', this.refreshData.bind(this));\n  }\n\n  getData(cb) {\n    d3.json(`/api/pages/${this.id}/analytics.json`, json => {\n      if (cb) {\n        cb(json);\n        this.setCounters(json.totals);\n      }\n    });\n  }\n\n  setCounters(totals) {\n    this.$totalAll.html(totals.all_total);\n    this.$totalNew.html(totals.new_total);\n  }\n\n  refreshData() {\n    this.getData(data => {\n      this.chart.data = data.hours;\n      this.chart.update();\n    });\n  }\n}\n\nvar createMiniChart = (className, data) => {\n  var svg = d3.select(`#analytics-dashboard .${className} .chart`);\n\n  var chart = new AnalyticsDashboard();\n  chart.width = 360;\n  chart.height = 70;\n  chart.fill = 'rgba(51,51,51,0.3)';\n  chart.data = data;\n  chart.xAxis = false;\n  chart.labels = false;\n  chart.svg = svg;\n  return chart;\n};\n\nexport default {\n  makeDashboard(pageId) {\n    var shortChartSVG = d3.select('#analytics-dashboard .short-view .chart'),\n      chart = new AnalyticsDashboard(),\n      d = new Conductor(pageId, chart);\n\n    d.getData(data => {\n      chart.width = 495;\n      chart.height = 280;\n      chart.data = data.hours;\n      chart.fill = 'rgba(51,51,51,1)';\n      chart.svg = shortChartSVG;\n      chart.axisDateFormat = 'HH a';\n      chart.render();\n\n      createMiniChart('mini-total', data.days_total.reverse()).render();\n\n      createMiniChart('mini-new', data.days_new.reverse()).render();\n    });\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/analytics.js","// This file handles the behaviour for managing form building.\n//\n// Dependencies:\n//\n//   jQuery.ui.sortable: https://jqueryui.com/sortable/\n//   - Allows form fields to be dragged and re-oredered\n//\n//   Twitter's typeahead: http://twitter.github.io/typeahead.js/\n//   - Use for autocompleting for setting the field's name value\n\nimport $ from 'jquery';\nimport setupOnce from './setup_once';\nimport ErrorDisplay from '../shared/show_errors';\nimport GlobalEvents from '../shared/global_events';\n\nconst CollectionEditor = Backbone.View.extend({\n  whitelist: [\n    // Permitted fields provided by ActionKit\n    'address1',\n    'address2',\n    'city',\n    'country',\n    'email',\n    'first_name',\n    'last_name',\n    'middle_name',\n    'mobile_phone',\n    'name',\n    'phone',\n    'plus4',\n    'postal',\n    'prefix',\n    'region',\n    'state',\n    'suffix',\n    'zip',\n\n    // Common custom fields used by campaigners\n    'customer',\n    'employee',\n    'shareholder',\n    'investor',\n  ],\n\n  events: {\n    'ajax:success #new_collection_element': 'newElementAdded',\n    'ajax:success #change-form-template': 'templateChanged',\n    'ajax:error a[data-method=delete]': 'deleteFailed',\n    'sortupdate .list-group': 'updateSort',\n  },\n\n  globalEvents: {\n    'survey:form_added': 'autoComplete',\n  },\n\n  initialize: function() {\n    this.makeSortable();\n    this.autoComplete();\n    this.$el.on('ajax:success', 'a[data-method=delete]', function() {\n      $(this).parents('.list-group-item').fadeOut();\n    });\n    GlobalEvents.bindEvents(this);\n  },\n\n  deleteFailed: function(e, xhr) {\n    const message = this.deleteErrorMessage(xhr);\n    alert(message);\n  },\n\n  deleteErrorMessage(xhr) {\n    const errors = xhr && xhr.responseJSON && xhr.responseJSON.errors;\n    if (!errors || Object.keys(errors).length < 1)\n      return 'That element could not be deleted';\n    const firstKey = Object.keys(errors)[0];\n    return `That element ${errors[firstKey]}`;\n  },\n\n  substringMatcher: function(strs) {\n    return function findMatches(q, cb) {\n      const matches = [];\n      const substrRegex = new RegExp(q, 'i');\n\n      // Iterate through the pool of strings and for any string that\n      // contains the substring `q`, add it to the `matches` array\n      $.each(strs, function(i, str) {\n        if (substrRegex.test(str)) {\n          matches.push(str);\n        }\n      });\n      cb(matches);\n    };\n  },\n\n  autoComplete: function() {\n    const $fields = this.$('.typeahead.typeahead--uninitialized');\n    $fields.removeClass('typeahead--uninitialized');\n    $fields.typeahead(\n      {\n        hint: true,\n        highlight: true,\n        minLength: 1,\n      },\n      {\n        name: 'fields',\n        source: this.substringMatcher(this.whitelist),\n      }\n    );\n  },\n\n  makeSortable: function() {\n    this.$('.list-group.sortable').sortable();\n  },\n\n  updateSort: function(event, ui, a, b) {\n    const ids = ui.item\n      .parent()\n      .children()\n      .map(function(i, el) {\n        return $(el).data('id');\n      })\n      .get()\n      .join();\n    const $form = ui.item\n      .parent()\n      .parent()\n      .find('form#sort-collection-elements');\n    $form.find('#form_element_ids').val(ids);\n    $form.submit();\n  },\n\n  newElementAdded: function(e, resp, c) {\n    let $listGroup = this.$(e.target)\n      .parents('.form-customization')\n      .find('.list-group');\n    $listGroup = $listGroup.length ? $listGroup : this.$('.list-group');\n    $listGroup.append(resp);\n    this.$('#form_element_label, #form_element_name').val('');\n    ErrorDisplay.clearErrors(this.$('form#new_collection_element'));\n    Backbone.trigger('collection:element_added');\n    this.makeSortable();\n  },\n\n  templateChanged: function(e, resp) {\n    this.$('.forms-edit').html(resp.html);\n    this.makeSortable();\n\n    // Updates the inline form's action URL with the new form ID.\n    this.$('#sort-collection-elements, #new_collection_element').each(function(\n      i,\n      el\n    ) {\n      const action = $(el).attr('action').replace(/\\d+/, resp.form_id);\n      $(el).attr('action', action);\n    });\n  },\n});\n\n$.subscribe('collection:edit:loaded', function() {\n  setupOnce('.collection-editor', CollectionEditor);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/collection_editor.js","import $ from 'jquery';\n\nconst TALL_EDITORS = ['page_body'];\n\nfunction configureWysiwyg(e, id) {\n  const $editor = $('#' + id);\n  if ($editor.length === 0) {\n    return false;\n  }\n\n  $editor.summernote({\n    toolbar: [\n      ['style', ['bold', 'italic', 'underline', 'clear']],\n      ['font', ['fontname', 'fontsize']],\n      ['para', ['ul', 'ol', 'paragraph']],\n      ['color', ['color']],\n      ['insert', ['link', 'picture', 'video']],\n      ['view', ['fullscreen', 'codeview', 'help']],\n    ],\n    height: TALL_EDITORS.indexOf(id) > -1 ? 280 : 120,\n    fontSizes: ['8', '10', '11', '12', '14', '16', '20', '24', '36', '72'],\n    codemirror: {\n      theme: 'default',\n      mode: 'text/html',\n      lineNumbers: true,\n      tabMode: 'indent',\n      lineWrapping: true,\n    },\n  });\n  const $contentField = $('#' + id + '_content');\n\n  $editor.summernote('fontSize', '16'); // default\n  $editor.summernote('code', $contentField.val());\n\n  // In order to make an iframe size down with the containing column\n  // or to fit on screen on mobile, you have to apply style to the iframe\n  // and to the containing element. This adds a class to the containing element\n  // that our CSS is looking for.\n  const encapsulateIframes = function(html) {\n    if (html.indexOf('iframe') === -1) {\n      return html; // don't do anything if there's no iframe\n    }\n    const $html = $(html);\n    // addClass is idempotent so we just call it every time we save\n    $html.find('iframe').parent().addClass('iframe-responsive-container');\n    // this little goof is just cause jquery doesn't have $el.outerHtml();\n    return $('<div></div>').append($html).html();\n  };\n\n  const updateContentBeforeSave = function() {\n    const content = encapsulateIframes($editor.summernote('code'));\n    $contentField.val(content);\n  };\n\n  $.subscribe('wysiwyg:submit', updateContentBeforeSave);\n}\n\n$.subscribe('wysiwyg:setup', configureWysiwyg);\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/configure_wysiwyg.js","import $ from 'jquery';\n\nconst configureDropZone = function() {\n  Dropzone.options.dropzone = {\n    maxFilesize: 2,\n    paramName: 'image[content]',\n    addRemoveLinks: false,\n    previewsContainer: null,\n    createImageThumbnails: true,\n    previewTemplate: document.querySelector('#dropzone-preview-template')\n      .innerHTML,\n\n    init: function() {\n      this.on('success', function(resp, html) {\n        $('.campaign-images .notice').hide();\n        $('.dz-success').replaceWith(html);\n        const id = $(html).data('image-id');\n        $.publish('image:success', [resp, id, html]);\n      });\n\n      this.on('addedfiled', function(file) {\n        this.removeFile(file);\n      });\n    },\n  };\n};\n\nconst bindHandlers = function() {\n  $('.campaign-images').on('ajax:success', 'a[data-method=delete]', function() {\n    $(this).parents('.dz-preview').fadeOut();\n    const imageId = $(this).parents('[data-image-id]').data('image-id');\n    $.publish('image:destroyed', imageId);\n  });\n};\n\nconst initialize = function() {\n  console.log('hi');\n  configureDropZone();\n  bindHandlers();\n};\n\nconst addImageOption = function(e, file, id, html) {\n  const newOption = \"<option value='\" + id + \"'>\" + file.name + '</option>';\n  $('#page_primary_image_id').append(newOption);\n};\n\nconst removeImageOption = function(e, id) {\n  $('#page_primary_image_id').find('option[value=\"' + id + '\"]').remove();\n};\n\n$.subscribe('dropzone:setup', initialize);\n$.subscribe('image:success', addImageOption);\n$.subscribe('image:destroyed', removeImageOption);\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/dropzone_image_upload.js","import GlobalEvents from '../shared/global_events';\n\nconst FormElementCreator = Backbone.View.extend({\n  GENERIC_NAME: 'instruction', // since instruction fields are the only type with no need for a name\n  GENERIC_LABEL: 'hidden', // since hidden fields are the only type with no need for a label\n\n  roles: [\n    'defaultValue',\n    'defaultRevealer',\n    'choices',\n    'label',\n    'name',\n    'manyChoices',\n  ],\n  modes: {\n    default: ['defaultRevealer', 'label', 'name', 'requirable'],\n    hidden: ['defaultValue', 'name'],\n    instruction: ['label'],\n    choice: ['choices', 'label', 'name', 'requirable'],\n    dropdown: ['manyChoices', 'label', 'name', 'requirable', 'defaultRevealer'],\n  },\n\n  events: {\n    'change #form_element_data_type': 'changeFormMode',\n    'click .form-element__remove-choice': 'removeChoice',\n    'click .form-element__add-choice': 'addChoice',\n  },\n\n  globalEvents: {\n    'collection:element_added': 'resetAfterSubmission',\n  },\n\n  initialize() {\n    this.changeFormMode({ target: this.$('#form_element_data_type') });\n    GlobalEvents.bindEvents(this);\n  },\n\n  changeFormMode(e) {\n    let mode = this.$(e.target).val();\n    if (!this.modes.hasOwnProperty(mode)) {\n      mode = 'default';\n    }\n    this.mode = mode;\n    this.setModeVisuals(mode);\n    this.setModeValues(mode);\n  },\n\n  resetAfterSubmission() {\n    this.setModeVisuals(this.mode);\n    this.setModeValues(this.mode);\n  },\n\n  setModeVisuals(mode) {\n    for (var role of this.roles) {\n      let $el = this.$(`[data-editor-role=${role}]`);\n      $el.toggleClass('hidden-closed', !this.hasField(role, mode));\n    }\n  },\n\n  setModeValues(mode) {\n    if (!this.hasField('choices', mode)) {\n      this.resetChoices();\n    }\n    if (!this.hasField('defaultValue', mode)) {\n      this.resetDefaultValue();\n    }\n    if (!this.hasField('requirable', mode)) {\n      this.resetRequired();\n    }\n    if (this.hasField('name', mode)) {\n      this.setNameAwayFromGeneric();\n    } else {\n      this.setNameToGeneric();\n    }\n    if (this.hasField('label', mode)) {\n      this.setLabelAwayFromGeneric();\n    } else {\n      this.setLabelToGeneric();\n    }\n  },\n\n  hasField(role, mode) {\n    return this.modes[mode].indexOf(role) > -1;\n  },\n\n  setNameToGeneric() {\n    this.$('input#form_element_name').val(this.GENERIC_NAME);\n  },\n\n  setNameAwayFromGeneric() {\n    let $nameField = this.$('input#form_element_name');\n    if ($nameField.val() === this.GENERIC_NAME) {\n      $nameField.val('');\n    }\n  },\n\n  setLabelToGeneric() {\n    this.$('input#form_element_label').val(this.GENERIC_LABEL);\n  },\n\n  setLabelAwayFromGeneric() {\n    let $nameField = this.$('input#form_element_label');\n    if ($nameField.val() === this.GENERIC_LABEL) {\n      $nameField.val('');\n    }\n  },\n\n  resetRequired() {\n    this.$('input#form_element_required').prop('checked', false);\n  },\n\n  resetDefaultValue() {\n    this.$('input#form_element_default_value').val('');\n  },\n\n  resetChoices() {\n    this.ensureCopyableChoiceField();\n    this.$('.form-element__choice-fields').html('');\n    this.$('.form-element__many-choices-field textarea').val('');\n    this.$('.form-element__choice-fields').append(\n      this.$copyableChoiceField.clone()\n    );\n  },\n\n  ensureCopyableChoiceField() {\n    if (this.$copyableChoiceField === undefined) {\n      this.$copyableChoiceField = this.$('.form-element__choice-field')\n        .first()\n        .clone();\n      this.$copyableChoiceField.find('input').val('');\n    }\n  },\n\n  addChoice() {\n    this.ensureCopyableChoiceField();\n    this.$('.form-element__choice-fields').append(\n      this.$copyableChoiceField.clone()\n    );\n  },\n\n  removeChoice(e) {\n    let $choiceField = this.$(e.target).parents('.form-element__choice-field');\n    if (this.$('.form-element__choice-fields').children().length > 1) {\n      $choiceField.remove();\n    } else {\n      $choiceField.find('input').val('');\n    }\n  },\n});\n\nexport default FormElementCreator;\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/form_element_creator.js","$(function() {\n  const fixPreviewElement = function() {\n    /*\n     *\n     * NOTE\n     * This function is currently not invoked.\n     * The plan is to have the preview div fix itself to view\n     * so it remains visible as the user scrolls down the page.\n     *\n     */\n\n    const $preview = $('.plugin-form-preview');\n\n    let originalPosition = $preview.offset(),\n      originalTop = originalPosition.top;\n\n    const handleSroll = function() {\n      const css = { position: 'fixed', top: '0px' };\n      if ($(window).scrollTop() >= originalTop) {\n        $preview.css(css);\n      } else {\n        $preview.css({ position: 'static' });\n      }\n    };\n\n    $(window).scroll(handleSroll);\n  };\n\n  const updatePreview = function() {\n    const updater = function(plugin_type) {\n      return function(ii, el) {\n        const $el = $(el);\n        (plugin_id = $el.data('plugin-id')), (url = [\n          '/plugins/forms/',\n          plugin_type,\n          '/',\n          plugin_id,\n        ].join(''));\n\n        $.get(url, function(resp) {\n          $el.find('.plugin-form-preview .content').html(resp);\n        });\n      };\n    };\n    $('.plugin.petition').each(updater('petition'));\n    $('.plugin.fundraiser').each(updater('fundraiser'));\n    $('.plugin.survey').each(updater('survey'));\n  };\n\n  if ($('.plugin-form-preview .content').length > 0) {\n    $.subscribe('plugin:form:preview:update', updatePreview);\n    $.subscribe('page:saved', updatePreview);\n  }\n\n  $(\n    '.plugin.petition, .plugin.fundraiser, .plugin.survey'\n  ).on('ajax:success', function() {\n    $.publish('plugin:form:preview:update');\n  });\n\n  $(\n    '.plugin.petition, .plugin.fundraiser, .plugin.survey'\n  ).on('ajax:error', function(e, xhr, resp) {\n    //for debugging\n    console.log(xhr, resp);\n  });\n});\n\nconst bindCaretToggle = function() {\n  $('[data-toggle=\"collapse\"]').on('click', function(e) {\n    $(this).toggleClass('open');\n  });\n};\n\n$.subscribe('plugin:form:loaded', bindCaretToggle);\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/form_preview.js","import $ from 'jquery';\nimport setupOnce from './setup_once';\n\nconst LayoutPicker = Backbone.View.extend({\n  events: {\n    'click .radio-group__option': 'updateSelected',\n    'change .layout-type-checkbox': 'showRelevantLayouts',\n  },\n\n  updateSelected(e) {\n    let $target = $(e.target);\n    if (!$target.hasClass('radio-group__option')) {\n      // for bubbling\n      $target = $target.parents('.radio-group__option');\n    }\n    const name = $target.find('.layout-settings__title').text();\n    $target\n      .parents('.layout-settings')\n      .find('.layout-settings__current')\n      .text(name);\n    $target\n      .parents('.layout-settings')\n      .find('.radio-group__option')\n      .removeClass('active');\n    $target.addClass('active');\n    this.updatePlan($target);\n  },\n\n  updatePlan($target) {\n    const $input = $target.find(`#${$target.attr('for')}`);\n    if ($input.attr('name') === 'page[follow_up_liquid_layout_id]') {\n      this.$('#page_follow_up_plan_with_liquid').prop('checked', true);\n    }\n  },\n\n  showRelevantLayouts(e) {\n    const $target = $(e.target);\n    const $allRows = $target\n      .closest('.form-group')\n      .find('.radio-group__option');\n    if ($target.is(':checked')) {\n      $allRows.removeClass('hidden');\n    } else {\n      const layoutClass = this.getLayoutClass($target.attr('id'));\n      $allRows.not(layoutClass).addClass('hidden');\n    }\n  },\n\n  getLayoutClass(layout_select_id) {\n    if (layout_select_id === 'primary') {\n      return '.primary-layout';\n    } else if (layout_select_id === 'follow-up') {\n      return '.post-action-layout';\n    }\n  },\n});\n\n$.subscribe('layout:edit pages:new', function() {\n  setupOnce('.layout-settings', LayoutPicker);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/layout_picker.js","'use strict';\nimport $ from 'jquery';\n\nconst slugChecker = Backbone.Model.extend({\n  url: '/action_kit/check_slug',\n\n  defaults: {\n    valid: null,\n    slug: '',\n  },\n});\n\nconst slugView = Backbone.View.extend({\n  el: '#new_page',\n\n  events: {\n    'keyup #page_title': 'generateSlug',\n    'change #page_title': 'generateSlug',\n    'keyup #page_slug': 'resetFeedback',\n    'click #check_slug_available': 'checkSlugAvailable',\n    submit: 'submit',\n  },\n\n  initialize() {\n    this.slugChecker = new slugChecker();\n    this.slugChecker.on('change:valid', _.bind(this.updateViewWithValid, this));\n    this.cacheDomElements();\n    this.checking = false;\n  },\n\n  cacheDomElements() {\n    this.$title = this.$('#page_title');\n    this.$slug = this.$('#page_slug');\n    this.$feedback = this.$('.form-group.slug');\n    this.$checkButton = this.$('#check_slug_available');\n    this.$submit = this.$('.submit-new-page');\n  },\n\n  updateViewWithValid() {\n    const valid = this.slugChecker.get('valid');\n\n    this.$submit.removeClass('disabled');\n\n    this.$('.loading').hide();\n\n    this.$('.form-group.slug').removeClass(\n      'has-error has-success has-feedback'\n    );\n\n    this.$('.form-group.slug .glyphicon').hide();\n\n    if (valid) {\n      this.$('.form-group.slug').addClass('has-success has-feedback');\n      this.$('.form-group.slug .glyphicon-ok').show();\n    } else {\n      this.$('.slug-field').show();\n\n      this.$('.form-group.slug').addClass('has-error has-feedback');\n      this.$('.form-group.slug .glyphicon-remove').show();\n    }\n  },\n\n  generateSlug() {\n    const slug = getSlug(this.$title.val());\n    this.resetFeedback();\n    this.$slug.val(slug);\n  },\n\n  checkSlugAvailable(e, cb) {\n    let slug;\n\n    e.preventDefault();\n    this.updateSlug();\n    slug = this.$slug.val();\n\n    this.checking = true;\n\n    this.$submit.addClass('disabled');\n\n    this.$('.loading').show();\n\n    this.slugChecker.set('slug', slug);\n\n    this.slugChecker.save().done(() => {\n      this.checking = false;\n      this.$checkButton\n        .text('Check if name is available')\n        .removeClass('disabled');\n\n      if (cb) {\n        cb.call(this);\n      }\n    });\n  },\n\n  updateSlug() {\n    const slug = getSlug(this.$slug.val());\n    this.resetFeedback();\n    this.$slug.val(slug);\n  },\n\n  resetFeedback() {\n    this.$feedback.removeClass('has-error has-success has-feedback');\n  },\n\n  submit(e) {\n    e.preventDefault();\n\n    this.$checkButton.text('Checking...').addClass('disabled');\n\n    if (!this.slugChecker.get('valid')) {\n      this.checkSlugAvailable(e, () => {\n        if (this.slugChecker.get('valid')) {\n          this.$el.unbind();\n          this.$el.submit();\n        }\n      });\n    } else {\n      this.$el.unbind();\n      this.$el.submit();\n    }\n  },\n});\n\nconst initialize = () => {\n  new slugView();\n};\n\n$.subscribe('pages:new', initialize);\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/page.js","import ErrorDisplay from \"../shared/show_errors\";\nimport _ from \"lodash\";\n\nlet PageModel = Backbone.Model.extend({\n  urlRoot: \"/api/pages\",\n\n  initialize: function() {\n    this.lastSaved = null;\n  },\n\n  // override save to only actually save if it's new data\n  save: function(data, callbacks) {\n    if (_.isEqual(data, this.lastSaved)) {\n      if (typeof callbacks.unchanged === \"function\") {\n        callbacks.unchanged();\n      }\n    } else {\n      this.lastSaved = data;\n      Backbone.Model.prototype.save.call(\n        this,\n        data,\n        _.extend({ patch: true }, callbacks)\n      );\n    }\n  },\n\n  setLastSaved: function(data) {\n    this.lastSaved = data;\n  }\n});\n\nlet PageEditBar = Backbone.View.extend({\n  el: \".page-edit-bar\",\n\n  events: {\n    \"click .page-edit-bar__save-button\": \"save\",\n    \"click .page-edit-bar__error-message\": \"findError\",\n    \"change .page-edit-bar__toggle-autosave .onoffswitch__checkbox\":\n      \"toggleAutosave\"\n  },\n\n  initialize: function() {\n    this.outstandingSaveRequest = false;\n    this.addStepsToSidebar();\n    this.model = new PageModel();\n    this.setupAutosave();\n    this.$saveBtn = this.$(\".page-edit-bar__save-button\");\n    $(\"body\").scrollspy({ target: \".scrollspy\", offset: 150 });\n    this.policeHeights();\n  },\n\n  addStepsToSidebar: function() {\n    const $existing = $(\"ul.page-edit-bar__step-list li\");\n    $(\".page-edit-step\").each((ii, step) => {\n      this.addStepToSidebar($(step));\n    });\n    $existing.remove();\n    this.$(\"ul.page-edit-bar__step-list\").append($existing);\n  },\n\n  addStepToSidebar: function($step) {\n    let $ul = this.$(\"ul.page-edit-bar__step-list\");\n    const title = $step\n      .find(\".page-edit-step__title\")[0]\n      .childNodes[0].nodeValue.trim();\n    const id = $step.attr(\"id\");\n    const icon = $step.data(\"icon\") || \"cubes\";\n    const link_href = $step.data(\"link-to\") ? $step.data(\"link-to\") : `#${id}`;\n    const link_target = $step.data(\"link-to\") ? \"_blank\" : \"_self\";\n    const li = `<li><a href=\"${link_href}\" target=\"${link_target}\"><i class=\"fa fa-${icon}\"></i>${title}</a></li>`;\n    $ul.append(li);\n  },\n\n  readData: function() {\n    let data = {};\n    $(\"form.one-form\").each((ii, form) => {\n      let $form = $(form);\n      let type = $form.data(\"type\") || \"base\";\n      if (!data.hasOwnProperty(type)) {\n        data[type] = {};\n      }\n      $.extend(data[type], this.serializeForm($form));\n    });\n    data.id = data.page[\"page[id]\"];\n    return data;\n  },\n\n  serializeForm: function($form) {\n    let data = {};\n    _.each($form.serializeArray(), function(pair) {\n      // this is to handle form arrays cause their name ends in []\n      if (pair.name.endsWith(\"[]\")) {\n        let name = pair.name.slice(0, -2);\n        if (!data.hasOwnProperty(name)) {\n          data[name] = [];\n        }\n        data[name].push(pair.value);\n      } else {\n        data[pair.name] = pair.value;\n      }\n    });\n    return data;\n  },\n\n  save: function() {\n    $.publish(\"wysiwyg:submit\"); // for summernote + codemirror to update content\n    if (!this.outstandingSaveRequest) {\n      this.disableSubmit();\n      this.model.save(this.readData(), {\n        success: this.saved.bind(this),\n        error: this.saveFailed.bind(this),\n        unchanged: this.enableSubmit.bind(this)\n      });\n    }\n  },\n\n  saved: function(e, data) {\n    if (data.refresh) {\n      location.reload();\n    }\n    this.enableSubmit();\n    $.publish(\"page:saved\", data);\n    $(\".page-edit-bar__save-box\").removeClass(\n      \"page-edit-bar__save-box--has-error\"\n    );\n    $(\".page-edit-bar__error-message\").text(\"\");\n    $(\".page-edit-bar__last-saved\").text(\n      I18n.t(\"pages.edit.last_saved_at\", { time: this.currentTime() })\n    );\n    this.policeHeights();\n  },\n\n  currentTime: function() {\n    const now = new Date();\n    const minutes = `0${now.getMinutes()}`.slice(-2); // for leading zero\n    const seconds = `0${now.getSeconds()}`.slice(-2); // for leading zero\n    return `${now.getHours()}:${minutes}:${seconds}`;\n  },\n\n  saveFailed: function(e, data) {\n    console.error(\"Save failed with\", e, data);\n    this.enableSubmit();\n    $(\".page-edit-bar__save-box\").addClass(\n      \"page-edit-bar__save-box--has-error\"\n    );\n    if (data.status == 422) {\n      ErrorDisplay.show(e, data);\n      $(\".page-edit-bar__error-message\").text(I18n.t(\"pages.edit.user_error\"));\n      $.publish(\"page:errors\");\n    } else {\n      $(\".page-edit-bar__error-message\").text(\n        I18n.t(\"pages.edit.unknown_error\")\n      );\n    }\n    this.policeHeights();\n  },\n\n  findError: function() {\n    if (\n      this.$(\".page-edit-bar__save-box\").hasClass(\n        \"page-edit-bar__save-box--has-error\"\n      )\n    ) {\n      if ($(\".has-error\").length > 0) {\n        $(\"html, body\").animate(\n          {\n            scrollTop: $(\".has-error\").first().offset().top\n          },\n          500\n        );\n      }\n    }\n  },\n\n  toggleAutosave: function(e) {\n    this.autosave = !this.autosave;\n    this.$(\".page-edit-bar__toggle-autosave\")\n      .find(\".toggle-button\")\n      .toggleClass(\"btn-primary\");\n    if (this.autosave) {\n      this.$(\".page-edit-bar__btn-holder\").addClass(\n        \"page-edit-bar__btn-holder--hidden\"\n      );\n    } else {\n      this.$(\".page-edit-bar__btn-holder\").removeClass(\n        \"page-edit-bar__btn-holder--hidden\"\n      );\n    }\n    window.setTimeout(() => {\n      this.policeHeights();\n    }, 200);\n  },\n\n  disableSubmit: function() {\n    this.outstandingSaveRequest = true;\n    this.$saveBtn.text(I18n.t(\"pages.edit.saving\"));\n    this.$saveBtn.addClass(\"disabled\");\n  },\n\n  enableSubmit: function() {\n    this.outstandingSaveRequest = false;\n    this.$saveBtn.text(I18n.t(\"pages.edit.save_work\"));\n    this.$saveBtn.removeClass(\"disabled\");\n  },\n\n  setupAutosave: function() {\n    const SAVE_PERIOD = 5000; // milliseconds\n    const shouldAutosave =\n      this.$(\".page-edit-bar__toggle-autosave\").data(\"autosave\") == true;\n    this.autosave = true;\n    this.model.setLastSaved(this.readData());\n    if (shouldAutosave != this.autosave) {\n      this.toggleAutosave();\n    }\n    window.setInterval(() => {\n      if (this.autosave) {\n        this.save();\n      } else {\n        this.showUnsavedAlert();\n      }\n    }, SAVE_PERIOD);\n  },\n\n  showUnsavedAlert: function() {\n    $.publish(\"wysiwyg:submit\"); // update wysiwyg\n    let $lastSaved = $(\".page-edit-bar__last-saved\");\n    const noNotice =\n      $lastSaved.find(\".page-edit-bar__unsaved-notice\").length < 1;\n    const unsavedDataExists = !_.isEqual(this.model.lastSaved, this.readData());\n    if (unsavedDataExists) {\n      if (noNotice) {\n        $lastSaved.append(\n          `<div class=\"page-edit-bar__unsaved-notice\">${I18n.t(\n            \"pages.edit.unsaved_changes\"\n          )}</div>`\n        );\n      }\n    } else {\n      $lastSaved.find(\".page-edit-bar__unsaved-notice\").remove();\n    }\n  },\n\n  policeHeights: function() {\n    if ($(window).width() <= 600) {\n      return;\n    }\n    var height =\n      $(window).height() -\n      this.$(\".page-edit-bar__logo\").height() -\n      this.$(\".page-edit-bar__save-box\").height() -\n      this.$(\".page-edit-bar__btn-holder\").outerHeight();\n    this.$(\".page-edit-bar__step-list\").css(\"height\", `${height}px`);\n  }\n});\n\nexport default PageEditBar;\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/page_edit_bar.js","import setupOnce from './setup_once';\n\n$(function() {\n  let ActivationToggle = Backbone.View.extend({\n    events: {\n      'ajax:before': 'toggleState',\n      'ajax:success': 'handleSuccess',\n      'ajax:error': 'handleError',\n      'change .onoffswitch__checkbox': 'handleClick',\n    },\n\n    initialize: function() {\n      this.$stateInput = this.$('.activation-toggle-field');\n      this.$checkbox = this.$('.onoffswitch__checkbox');\n      this.state = this.$stateInput.val();\n    },\n\n    handleClick: function(e) {\n      if (\n        this.state == 'published' &&\n        this.$stateInput.data('confirm-turning-off')\n      ) {\n        if (!window.confirm(this.$stateInput.data('confirm-turning-off'))) {\n          this.toggleButton();\n          return false;\n        }\n      }\n      this.$el.submit();\n    },\n\n    toggleButton: function() {\n      this.$checkbox.prop('checked', !this.$checkbox.prop('checked'));\n    },\n\n    handleSuccess: function(e, data) {},\n\n    handleError: function(xhr, status, error) {\n      console.error('error', status, error);\n      this.toggleButton();\n      this.toggleState();\n    },\n\n    toggleState: function(e) {\n      if (\n        $(e.target)\n          .find('input.onoffswitch__checkbox')\n          .hasClass('use-publish-states')\n      ) {\n        this.state = this.state === 'published' ? 'unpublished' : 'published';\n      } else {\n        this.state = this.state === 'true' ? 'false' : 'true';\n      }\n      this.$stateInput.val(this.state);\n    },\n  });\n\n  $.subscribe('activation:toggle', function() {\n    setupOnce('form.activation-toggle', ActivationToggle);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/plugins_toggle.js","import $ from 'jquery';\n\nconst searchConfig = function() {\n  $('.page-filter__reset').click(function() {\n    $('select.selectize-container').map(function(index, item) {\n      item.selectize.clear();\n    });\n    $(this).closest('form').find('.form-control').map(function(index, item) {\n      $(item).val('');\n    });\n  });\n\n  $('#pages-table').DataTable({\n    /* Disable initial sort */\n    aaSorting: [],\n  });\n};\n\n$.subscribe('search:load', searchConfig);\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/search.js","$(function() {\n  $('.selectize-container').selectize({\n    plugins: ['remove_button'],\n    closeAfterSelect: true,\n  });\n\n  var lastVal;\n  $('.selectize-container--clear-on-open').selectize({\n    onDropdownOpen: function() {\n      lastVal = this.getValue();\n      this.clear();\n    },\n    onDropdownClose: function() {\n      if (this.items.length < 1) this.setValue(lastVal);\n    },\n    closeAfterSelect: true,\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/selectize_config.js","import $ from 'jquery';\nimport _ from 'lodash';\nimport setupOnce from './setup_once';\nimport GlobalEvents from '../shared/global_events';\nimport Clipboard from 'clipboard';\n\nconst SharesEditor = Backbone.View.extend({\n  events: {\n    'ajax:success form.shares-editor__delete-variant': 'deleteVariant',\n    'click .shares-editor__toggle-edit': 'toggleEditor',\n    'click .shares-editor__new-type-toggle .btn': 'switchVariantForm',\n    'click .shares-editor__view-toggle .btn': 'switchView',\n    'ajax:success form.shares-editor__new-form': 'clearFormAndConformView',\n  },\n\n  globalEvents: {\n    'page:saved': 'updateSummaryRows',\n    'page:errors': 'openEditorForErrors',\n    'image:success': 'addImageSelectors',\n    'image:destroyed': 'pruneImageSelectors',\n  },\n\n  initialize: function() {\n    this.view = 'summary';\n    GlobalEvents.bindEvents(this);\n  },\n\n  deleteVariant: function(e) {\n    const $target = $(e.target);\n    const $summary_row = $target.parents('.shares-editor__summary-row');\n    const $stats_row = $summary_row.next('.shares-editor__stats-row');\n    const $edit_row = $stats_row.next('.shares-editor__edit-row');\n    $summary_row.remove();\n    $stats_row.remove();\n    $edit_row.remove();\n  },\n\n  editRow: function($row) {\n    if (!$row.hasClass('shares-editor__stats-row')) {\n      $row = $row.next('.shares-editor__stats-row');\n    }\n    return $row.next('.shares-editor__edit-row');\n  },\n\n  toggleEditor: function(e) {\n    let $target = this.$(e.target);\n    $target = $target.is('tr') ? $target : $target.parents('tr');\n    const $btn = $target.find('.shares-editor__toggle-edit');\n    this.editRow($target).toggleClass('hidden-closed');\n    $btn.text($btn.text() == 'Edit' ? 'Done' : 'Edit');\n  },\n\n  openEditor: function($edit_row) {\n    const $prev = $edit_row.prev('.shares-editor__summary-row');\n    const $btn = $prev.find('.shares-editor__toggle-edit');\n    $btn.text('Done');\n    $edit_row.removeClass('hidden-closed');\n  },\n\n  switchVariantForm: function(e) {\n    const $target = this.$(e.target);\n    const desired = $target.data('state');\n    if (desired) {\n      this.$('.shares-editor__new-type-toggle .btn').removeClass('btn-primary');\n      $target.addClass('btn-primary');\n      this.$('.shares-editor__new-form').addClass('hidden-closed');\n      this.$(`.shares-editor__new-form[data-share=\"${desired}\"]`).removeClass(\n        'hidden-closed'\n      );\n    }\n  },\n\n  switchView: function(e) {\n    const $target = this.$(e.target);\n    const desired = $target.data('state');\n    if (desired) {\n      this.setView(desired);\n    }\n  },\n\n  setView: function(desired) {\n    this.view = desired;\n    this.$('.shares-editor__view-toggle .btn').removeClass('btn-primary');\n    this.$(`[data-state=\"${desired}\"]`).addClass('btn-primary');\n    if (desired === 'summary') {\n      this.$('.shares-editor__summary-row').removeClass('hidden-closed');\n      this.$('.shares-editor__stats-row').addClass('hidden-closed');\n      this.$('.shares-editor__stats-heading').addClass('hidden-closed');\n    } else {\n      this.$('.shares-editor__summary-row').addClass('hidden-closed');\n      this.$('.shares-editor__stats-row').removeClass('hidden-closed');\n      this.$('.shares-editor__stats-heading').removeClass('hidden-closed');\n    }\n  },\n\n  clearFormAndConformView: function(e) {\n    $(e.target).find('input[type=\"text\"], textarea').val('');\n    this.setView(this.view); // make new rows conform\n  },\n\n  openEditorForErrors: function() {\n    this.openEditor(this.$('.has-error').parents('.shares-editor__edit-row'));\n  },\n\n  updateSummaryRows: function(e, data) {\n    // this only updates existing shares. new ones are appended by\n    // code in view/share/shares/create.js.erb, using rails UJS\n    $.get(`/api/pages/${data.id}/share-rows`, rows => {\n      _.each(rows, row => {\n        let $row = $(row.html);\n        const $original = $(`#${$row.prop('id')}`);\n        if ($original.hasClass('hidden-closed')) {\n          $row.addClass('hidden-closed');\n        }\n        $row = $original.replaceWith($row);\n        $row = $(`#${$row.prop('id')}`);\n        if (!this.editRow($row).hasClass('hidden-closed')) {\n          $row.find('.shares-editor__toggle-edit').text('Done');\n        }\n      });\n    });\n  },\n\n  addImageSelectors: function(e, file, id, html) {\n    const newOption = `<option value='${id}'>${file.name}</option>`;\n    this.$('.shares-editor__image-selector').append(newOption);\n  },\n\n  pruneImageSelectors: function(e, id) {\n    this.$(`option[value=\"${id}\"]`).remove();\n  },\n});\n\n$.subscribe('shares:edit', function() {\n  setupOnce('.shares-editor', SharesEditor);\n});\n\n$(function() {\n  new Clipboard('.share-copy-url');\n\n  $('.shares-editor__existing').on('click', '.share-copy-url', e => {\n    e.preventDefault();\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/shares_editor.js","import $ from 'jquery';\nimport setupOnce from './setup_once';\n\nconst Sidebar = Backbone.View.extend({\n  events: {\n    'click .sidebar__header-link': 'toggleGroup',\n  },\n\n  toggleGroup: function(e) {\n    const $group = $(e.target).parents('.sidebar__group');\n    $group.toggleClass('sidebar__group--closed sidebar__group--open');\n  },\n});\n\n$.subscribe('sidebar:nesting', function() {\n  setupOnce('.sidebar', Sidebar);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/sidebar.js","import GlobalEvents from '../shared/global_events';\n\nconst SurveyEditor = Backbone.View.extend({\n  el: '.survey',\n\n  events: {\n    'sortupdate .survey__forms': 'handleSort',\n  },\n\n  globalEvents: {\n    'survey:form_added': 'makeSortable',\n  },\n\n  initialize(options = {}) {\n    this.makeSortable();\n    this.id = this.$el.data('plugin-id');\n    GlobalEvents.bindEvents(this);\n  },\n\n  makeSortable() {\n    this.$('.survey__forms').sortable();\n  },\n\n  handleSort(e, ui) {\n    if (!$(e.target).hasClass('survey__forms')) return;\n    let ids = ui.item\n      .parent()\n      .children()\n      .map((i, el) => {\n        return this.$(el).data('id');\n      })\n      .get();\n    this.saveFormOrder(ids);\n  },\n\n  saveFormOrder(ids) {\n    $.ajax(`/plugins/surveys/${this.id}/sort`, {\n      method: 'PUT',\n      data: { form_ids: ids.join(',') },\n    }).done(function() {\n      $.publish('plugin:form:preview:update');\n    });\n  },\n});\n\nexport default SurveyEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/survey_editor.js","// This depends on codemirror and its modes being required in\n// `app/assets/javascripts/application.js`\nimport $ from 'jquery';\n\n$(function() {\n  $('.syntax-highlighting').each(function(idx, el) {\n    const mode = $(el).data('highlight-mode') || 'htmlmixed';\n    const cm = CodeMirror.fromTextArea(el, {\n      mode: mode,\n      theme: '3024-night',\n    });\n    $.subscribe('wysiwyg:submit', cm.save);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/syntax_highlighting.js","import $ from 'jquery';\n\n$.subscribe('pages:new pages:edit form:edit pages:analytics', function() {\n  $('[data-toggle=\"tooltip\"]').tooltip();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/campaigner_facing/tooltips.js","// Copied over from previous file in\n// assets/javascripts/application.js manifest\n// A lot of this might be unnecessary (and it will do well\n// to reduce bundle size)\n\n// TODO: Refactor this to *not* get imported into the global scope\nimport '../shared/pub_sub';\nimport '../shared/show_errors';\nimport '../campaigner_facing/syntax_highlighting';\nimport '../campaigner_facing/dropzone_image_upload';\nimport '../campaigner_facing/selectize_config';\nimport '../campaigner_facing/search';\nimport '../campaigner_facing/configure_wysiwyg';\nimport '../campaigner_facing/form_preview';\nimport '../campaigner_facing/ajax';\nimport '../campaigner_facing/page';\nimport '../campaigner_facing/plugins_toggle';\nimport '../campaigner_facing/sidebar';\nimport '../campaigner_facing/tooltips';\nimport '../campaigner_facing/collection_editor';\nimport '../campaigner_facing/shares_editor';\nimport '../campaigner_facing/actions_editor';\nimport '../campaigner_facing/layout_picker';\n\nimport PageEditBar from '../campaigner_facing/page_edit_bar';\nimport Analytics from '../campaigner_facing/analytics';\nimport SurveyEditor from '../campaigner_facing/survey_editor';\nimport FormElementCreator from '../campaigner_facing/form_element_creator';\n\nObject.assign(window, {\n  PageEditBar,\n  Analytics,\n  SurveyEditor,\n  FormElementCreator,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/packs/campaigner_facing.js","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', 'select'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.container = options.container;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                this.container.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    this.container.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    this.container.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.trigger) {\n                    this.trigger.focus();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/clipboard/lib/clipboard-action.js\n// module id = 724\n// module chunks = 5","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n                this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    container: this.container,\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/clipboard/lib/clipboard.js\n// module id = 725\n// module chunks = 5","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/delegate/src/closest.js\n// module id = 732\n// module chunks = 5","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/delegate/src/delegate.js\n// module id = 733\n// module chunks = 5","/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/good-listener/src/is.js\n// module id = 765\n// module chunks = 5","var is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/good-listener/src/listen.js\n// module id = 766\n// module chunks = 5","function select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/select/src/select.js\n// module id = 800\n// module chunks = 5","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tiny-emitter/index.js\n// module id = 806\n// module chunks = 5","module.exports = window.Backbone;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"window.Backbone\"\n// module id = 94\n// module chunks = 1 5"],"sourceRoot":""}